(self.webpackChunk_epic_social_social_modules=self.webpackChunk_epic_social_social_modules||[]).push([[157],{12344:(e,n,t)=>{"use strict";var r;function i(e){r=e}function a(e){r?r(e):console.warn("No analytic handler set")}t.d(n,{K:()=>i,c:()=>a})},81687:(e,n,t)=>{"use strict";t.d(n,{useSendAnalytic:()=>i.y,sendAnalytic:()=>a.c,setAnalyticsHandler:()=>a.K,addToPayload:()=>o.L});var r=t(45185);t.o(r,"addToPayload")&&t.d(n,{addToPayload:function(){return r.addToPayload}}),t.o(r,"sendAnalytic")&&t.d(n,{sendAnalytic:function(){return r.sendAnalytic}}),t.o(r,"setAnalyticsHandler")&&t.d(n,{setAnalyticsHandler:function(){return r.setAnalyticsHandler}}),t.o(r,"useSendAnalytic")&&t.d(n,{useSendAnalytic:function(){return r.useSendAnalytic}});var i=t(10420),a=t(12344),o=t(2208)},2208:(e,n,t)=>{"use strict";t.d(n,{L:()=>o});var r=t(73450);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){return a(a({},e),{},{payload:a(a({},e.payload||{}),n)})}},44117:(e,n,t)=>{"use strict";function r(e){return e?e.map((function(e){return{type:e.type,displayName:e.externalDisplayName}})):[]}t.d(n,{q:()=>r})},76772:(e,n,t)=>{"use strict";t.d(n,{m:()=>P});var r=t(61424),i=t(57135),a=t.n(i),o=t(41476),u=t(25180),s=t(58640),c=t(73450),d=t(63438),l=t(48318),f=t(70184),p=t(88032),v=t(42596),h=t(82841),y=t(33489);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,h.q)((function(e){var n=e.graphQLErrors;n&&n&&(n.map((function(e){var n=e.message;return console.error("message: ".concat(n))})),console.error(n))}));var w=t(93508),k=t(85985),S=t(23063),I=t(32952),x=t(1348),A=t.n(x);function O(){var e=(0,r.Z)(["\n                ","\n            "]);return O=function(){return e},e}function T(){var e=(0,r.Z)(["\n                ","\n            "]);return T=function(){return e},e}var F=function(e){var n=e.authToken;return e.initialized&&n.length>0},P=new(function(){function e(){var n=this;(0,u.Z)(this,e),(0,c.Z)(this,"endpoint",void 0),(0,c.Z)(this,"client",void 0),(0,c.Z)(this,"state",{authToken:"",initialized:!1}),(0,c.Z)(this,"stateChange",new I.xQ),(0,c.Z)(this,"initialize",(function(e){var t,r,i,a,o,u,s,c,h=(t=e,r=n.getAuthToken,i="include",a=function(e,n){var t=function(e){var n={Authorization:"","X-EPIC-CORRELATION-ID":""};try{e&&""!==e&&(n.Authorization="Bearer ".concat(e)),n["X-EPIC-CORRELATION-ID"]=(0,y.Z)()}catch(e){console.log("Failed to get token from sdk")}return n}(r().authToken);return n.referrerPolicy="no-referrer-when-downgrade",n.headers=b(b({},n.headers),t),(0,v.Z)(e,n)},o=new l.A({uri:t,batchMax:10,batchInterval:15,credentials:i,fetch:a}),u=new f.u({uri:t,credentials:i,fetch:a}),s=g.split((function(e){return 1===e.getContext().version}),o,u),c=new d.fe({cache:new p.h4,link:s,name:"overlay",version:"1.0",queryDeduplication:!1,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{errorPolicy:"all"}}}),function(){return c});n.client=h(),n.endpoint=e,n.state.initialized=!0,n.stateChange.next(n.state)})),(0,c.Z)(this,"getAuthToken",(function(){return{authToken:n.state.authToken}})),(0,c.Z)(this,"setAuthToken",(function(e){n.state.authToken=e,n.stateChange.next(n.state)})),(0,c.Z)(this,"waitForInit",(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stateChange.pipe((0,w.O)(n.state),(0,k.h)(F),(0,S.q)(1)).toPromise();case 2:return e.abrupt("return",n.client);case 3:case"end":return e.stop()}}),e)}))))}var n,t;return(0,s.Z)(e,[{key:"query",value:(t=(0,o.Z)(a().mark((function e(n){var t,r,i,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.waitForInit();case 4:return i=e.sent,e.abrupt("return",i.query({query:A()(T(),n),variables:t,context:{options:r}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"mutate",value:(n=(0,o.Z)(a().mark((function e(n){var t,r,i,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.waitForInit();case 4:return i=e.sent,e.abrupt("return",i.mutate({mutation:A()(O(),n),variables:t,context:{options:r}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}())},18385:(e,n,t)=>{"use strict";t.d(n,{oc:()=>c.Z,bd:()=>s,pf:()=>b,QT:()=>l.Z,Hk:()=>d.Z});var r=t(65229),i=t(8906),a=t.n(i),o=t(4517),u=a().createElement;function s(e){var n=e.locale,t=e.supportedLocales,i=e.defaultLocale,s=e.overrides,c=e.children,d=(0,o.uA)({locale:n,defaultLocale:i,supported:t,overrides:s}),l=b(d);return a().useEffect((function(){document.documentElement.lang=d}),[d]),u(r.Z.Provider,{value:l},c)}var c=t(62537),d=t(42591),l=t(47894),f=t(57135),p=t.n(f),v=t(41476),h=t(50573),y=t(39544),m="en-US";function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=(0,y.Z)(),t=(0,i.useState)(h),r=t[0],a=t[1];return(0,i.useEffect)((function(){function t(){return(t=(0,v.Z)(p().mark((function e(n){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.MP)(n);case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch localization for ".concat(n),e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}n&&e===m||function(e){t.apply(this,arguments)}(e)}),[n,e]),r}t(42363)},43282:(e,n,t)=>{"use strict";function r(e){var n=e.locale,t=e.defaultLocale,r=e.supported,i=e.overrides,a=void 0===i?{}:i;if(r.includes(n))return n;if(n in a)return a[n];var o=n.substr(0,2);return r.includes(o)?o:o in a?a[o]:t}t.d(n,{u:()=>r})},4517:(e,n,t)=>{"use strict";t.d(n,{$G:()=>r.$,az:()=>i.a,uA:()=>l.u,MP:()=>s,dn:()=>d.d});var r=t(57414),i=t(8213),a=t(57135),o=t.n(a),u=t(41476);function s(e){return c.apply(this,arguments)}function c(){return(c=(0,u.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(98784)("./messages-overlay_".concat(n,".json"));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=t(11264),l=t(43282)},35004:(e,n,t)=>{"use strict";t.d(n,{W:()=>o,K:()=>u});var r=t(93508),i=t(28043),a=t(84670);function o(e){return e&&e.startsWith("eg1~")}function u(e){return e.changes(a.Qb).pipe((0,r.O)(e.get(a.Qb)),(0,i.x)(s))}function s(e,n){return e.authToken===n.authToken&&e.elevatedToken===n.elevatedToken}},83022:(e,n,t)=>{"use strict";t.d(n,{Hb:()=>i,Gy:()=>a,Xn:()=>o,KJ:()=>u});var r=t(25926),i="achievements",a="egs-achievements",o=(0,r.Rl)(i,"achievements",[]),u=(0,r.Rl)(a,"egs-achievements",{})},32935:(e,n,t)=>{"use strict";t.d(n,{Z:()=>v});var r=t(19394),i=t(57135),a=t.n(i),o=t(41476),u=t(25180),s=t(58640),c=t(14754),d=t(76772);function l(e){return e.filter((function(e){return!!e.id}))}var f=t(44117);function p(e,n){return e?e.filter((function(e){return!(null==e||!e.account)&&(null==e?void 0:e.account.length)>0})).map((function(e){var t,r,i,a,o,u,s,c,d,l;return{id:null==e||null===(t=e.account)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id,displayName:(null==e||null===(i=e.account)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.displayName)||(null==e||null===(o=e.account)||void 0===o||null===(u=o[0])||void 0===u||null===(s=u.externalAuths)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.externalDisplayName),type:n,externalAuths:(0,f.q)(null==e||null===(d=e.account)||void 0===d||null===(l=d[0])||void 0===l?void 0:l.externalAuths)}})):[]}const v=new(function(){function e(){(0,u.Z)(this,e)}var n,t,i,v,h,y,m,b;return(0,s.Z)(e,[{key:"addFriend",value:(b=(0,o.Z)(a().mark((function e(n){var t,r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.mutate("\n    mutation inviteFriendRequest($friendId: String!) {\n        Friends {\n            invite(friendToInvite: $friendId) {\n                success\n            }\n        }\n    }\n",{friendId:n});case 2:if(u=e.sent,s=null!==(t=null===(r=u.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(o=i.invite)||void 0===o?void 0:o.success)&&void 0!==t&&t,null==u||!u.errors){e.next=9;break}throw l=null===(c=u.errors[0])||void 0===c?void 0:c.serviceResponse,(f=new Error(l)).serviceResponse=JSON.parse(l),f;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})},{key:"blockFriend",value:(m=(0,o.Z)(a().mark((function e(n){var t,r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.mutate("\nmutation block($friendToBlock: String!) {\n  Friends {\n    block(friendToBlock: $friendToBlock) {\n      success\n    }\n  }\n}\n",{friendToBlock:n});case 2:if(u=e.sent,s=null!==(t=null===(r=u.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(o=i.block)||void 0===o?void 0:o.success)&&void 0!==t&&t,null==u||!u.errors){e.next=9;break}throw l=null===(c=u.errors[0])||void 0===c?void 0:c.serviceResponse,(f=new Error(l)).serviceResponse=JSON.parse(l),f;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"deleteFriend",value:(y=(0,o.Z)(a().mark((function e(n){var t,r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.mutate("\n    mutation deleteFriend($friendId: String!) {\n        Friends {\n            deleteFriend(friendToDelete: $friendId) {\n                success\n            }\n        }\n    }\n",{friendId:n});case 2:if(u=e.sent,s=null!==(t=null===(r=u.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(o=i.deleteFriend)||void 0===o?void 0:o.success)&&void 0!==t&&t,!u.errors){e.next=9;break}throw l=null===(c=u.errors[0])||void 0===c?void 0:c.serviceResponse,(f=new Error(l)).serviceResponse=JSON.parse(l),f;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"unblockFriend",value:(h=(0,o.Z)(a().mark((function e(n){var t,r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.mutate("\nmutation unblock($friendToUnblock: String!) {\n  Friends {\n    unblock(friendToUnblock: $friendToUnblock) {\n      success\n    }\n  }\n}\n",{friendToUnblock:n});case 2:if(u=e.sent,s=null!==(t=null===(r=u.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(o=i.unblock)||void 0===o?void 0:o.success)&&void 0!==t&&t,null==u||!u.errors){e.next=9;break}throw l=null===(c=u.errors[0])||void 0===c?void 0:c.serviceResponse,(f=new Error(l)).serviceResponse=JSON.parse(l),f;case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getFriends",value:(v=(0,o.Z)(a().mark((function e(){var n,t,i,o,u,s,c,f,v,h,y,m,b,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.query("\nquery friends($displayNames: Boolean) {   \n    Friends {\n        summary(displayNames: $displayNames) {\n            friends {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n            incoming {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n            outgoing {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n        }\n    }\n}\n",{displayNames:!1});case 2:return h=e.sent,y=(null===(n=h.data)||void 0===n||null===(t=n.Friends)||void 0===t||null===(i=t.summary)||void 0===i?void 0:i.friends)||[],m=(null===(o=h.data)||void 0===o||null===(u=o.Friends)||void 0===u||null===(s=u.summary)||void 0===s?void 0:s.incoming)||[],b=(null===(c=h.data)||void 0===c||null===(f=c.Friends)||void 0===f||null===(v=f.summary)||void 0===v?void 0:v.outgoing)||[],g=[].concat((0,r.Z)(p(y,"accepted")),(0,r.Z)(p(m,"incoming")),(0,r.Z)(p(b,"outgoing"))),e.abrupt("return",l(g));case 8:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"getFriend",value:(i=(0,o.Z)(a().mark((function e(n,t){var r,i,o,u,s,c,l,p,v,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.query("\nquery account($accountId: String) {   \n    Account {\n        account(id: $accountId) {\n            id\n            displayName\n            externalAuths {\n                type\n                externalDisplayName\n            }\n        }\n    }\n}\n",{accountId:n});case 2:return v=e.sent,h=null===(r=v.data)||void 0===r||null===(i=r.Account)||void 0===i?void 0:i.account,e.abrupt("return",{id:null==h||null===(o=h[0])||void 0===o?void 0:o.id,displayName:(null==h||null===(u=h[0])||void 0===u?void 0:u.displayName)||(null==h||null===(s=h[0])||void 0===s||null===(c=s.externalAuths)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.externalDisplayName),type:t,externalAuths:(0,f.q)(null==h||null===(p=h[0])||void 0===p?void 0:p.externalAuths)});case 5:case"end":return e.stop()}}),e)}))),function(e,n){return i.apply(this,arguments)})},{key:"setPrivacySettings",value:(t=(0,o.Z)(a().mark((function e(n){var t,r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.mutate("\nmutation setPrivacySettings($acceptInvites: FriendInviteType!) {\n  Friends {\n    setSettings(data: {acceptInvites: $acceptInvites}) {\n      acceptInvites\n    }\n  }\n}\n",{acceptInvites:n});case 2:if(o=e.sent,u=(null===(t=o.data)||void 0===t||null===(r=t.Friends)||void 0===r||null===(i=r.setSettings)||void 0===i?void 0:i.acceptInvites)===n.toString(),null==o||!o.errors){e.next=9;break}throw c=null===(s=o.errors[0])||void 0===s?void 0:s.serviceResponse,(l=new Error(c)).serviceResponse=JSON.parse(c),l;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getPrivacySettings",value:(n=(0,o.Z)(a().mark((function e(){var n,t,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.m.query("\nquery privacySettings {\n  Friends {\n    settings {\n      acceptInvites\n    }\n  }\n}\n");case 2:return i=e.sent,o=null===(n=i.data)||void 0===n||null===(t=n.Friends)||void 0===t||null===(r=t.settings)||void 0===r?void 0:r.acceptInvites,e.abrupt("return",o?o.toString():c.X.All);case 5:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}]),e}())},97826:(e,n,t)=>{"use strict";t.d(n,{gn:()=>i,my:()=>a,sc:()=>o,bo:()=>u,rO:()=>s,Gx:()=>c,TL:()=>d,XM:()=>l,YP:()=>f,$x:()=>p,Pz:()=>v,ob:()=>h,$4:()=>y,ch:()=>m});var r=t(25926),i="application",a=(0,r.Rl)(i,"app-info",{locale:"en-US",visible:!0,displayPreference:"topRight",launchPlatform:"unknown"}),o=((0,r.Rl)("platform-requests","pending-platform-requests",[]),(0,r.Rl)(i,"hotkey-info",{name:["Shift","F3"],pressed:!1})),u=(0,r.Rl)(i,"intent-status",[]),s=((0,r.Rl)(i,"last-error"),{id:"notification-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}}),c={id:"window-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}},d={id:"current-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}},l={id:"app-panel-visible",defaultValue:"exited"},f={id:"current-display-settings",defaultValue:{visible:!1,exclusiveInput:!1,hitBox:{top:0,bottom:0,left:0,right:0}}},p="app-open-request",v="intent-started",h="intent-error",y="intent-success",m="intent-finished"},31975:(e,n,t)=>{"use strict";t.d(n,{I:()=>i});var r=t(46218);const i=function(e){return(0,e.children)((0,r.b)())}},24535:(e,n,t)=>{"use strict";t.d(n,{V6:()=>r,d:()=>i,I1:()=>a,Bt:()=>o,lS:()=>u});var r=3e5,i=12e5,a="https://datarouter.ol.epicgames.com",o="social-modules",u=3e5},71507:(e,n,t)=>{"use strict";t.d(n,{Nx:()=>i,RK:()=>a,_O:()=>o,l3:()=>u,ok:()=>s});var r=t(25926),i="friends",a="friends-management",o=(0,r.Rl)(i,"friends",[]),u={id:"friends-index",defaultValue:{}},s=(0,r.Rl)(a,"friends-search-results",[])},26070:(e,n,t)=>{"use strict";t.d(n,{a3:()=>o,PW:()=>u,ZD:()=>s});var r=t(30930),i=t(92216),a=t(287),o=function(e){return e.get(r.v).filter((function(n){var t=e.get((0,a.N)(n.id));return"online"===(null==t?void 0:t.status)}))},u=function(e){var n=e.get(o),t=e.get(i.H);return n.filter((function(n){var r=e.get((0,a.N)(n.id));return(null==r?void 0:r.appId)!==t}))},s=function(e){return e.get(r.v).filter((function(n){var t=e.get((0,a.N)(n.id));if(!t)return!0;switch(t.status){case"away":case"extendedAway":case"offline":return!0;default:return!1}}))}},31131:(e,n,t)=>{"use strict";t.d(n,{FeaturePlatformEffects:()=>i.Y,buildUpdates:()=>a.Z,useAcceptFriendRequest:()=>o.bE,useAcceptedFriends:()=>o.Q9,useAwayOrOfflineFriends:()=>o.xl,useBlockFriend:()=>o.H2,useDismissFriendRequest:()=>o.CK,useFriendLinking:()=>o.eF,useFriendSearchResults:()=>o.yo,useFriendsMap:()=>o.tH,useIncomingFriendRequests:()=>o.uM,useMyAppFriends:()=>o.xm,useMyOnlineAppFriends:()=>o.bq,useNotMyAppFriends:()=>o.cB,useOnlineFriendsNotInMyApp:()=>o.tR,useSearchByTerm:()=>o.S8,useSendFriendRequest:()=>o.qh,useUnblockFriend:()=>o.QZ,FriendProvider:()=>u.k,FriendsFeature:()=>s.Nx,FriendsManagementFeature:()=>s.RK,useLastOnline:()=>c.o7,useLastOnlineMap:()=>c.Mx,usePresence:()=>c.oO,usePresenceMap:()=>c.S,PresenceProvider:()=>d.w,usePlatformInfo:()=>l.N,usePlatformName:()=>l.T,useAcceptGameInvite:()=>f.FO,useDismissGameInvite:()=>f.AV,useGameJoin:()=>f.hU,useGameSendInvite:()=>f.PB,useInvitesToAllGames:()=>f.jh,useInvitesToMyGame:()=>f.$G,useMyAppId:()=>f.Fg,useMyAppName:()=>f.XL,useAppPanelVisible:()=>p.hZ,useHotKeyPressed:()=>p.pc,useLocale:()=>p.bU,LocaleProvider:()=>v.I,useClearNotifications:()=>h.EX,useRemoveNotification:()=>h.XO,useSortedNotifications:()=>h.l5,useFlags:()=>y.Vb,useIsFeatureEnabled:()=>y.N3,useAnalyticScreen:()=>b.X,AchievementsFeature:()=>g.Hb,LeaderboardFeature:()=>w.O2});var r=t(40153);t.o(r,"AchievementsFeature")&&t.d(n,{AchievementsFeature:function(){return r.AchievementsFeature}}),t.o(r,"FeaturePlatformEffects")&&t.d(n,{FeaturePlatformEffects:function(){return r.FeaturePlatformEffects}}),t.o(r,"FriendProvider")&&t.d(n,{FriendProvider:function(){return r.FriendProvider}}),t.o(r,"FriendsFeature")&&t.d(n,{FriendsFeature:function(){return r.FriendsFeature}}),t.o(r,"FriendsManagementFeature")&&t.d(n,{FriendsManagementFeature:function(){return r.FriendsManagementFeature}}),t.o(r,"LeaderboardFeature")&&t.d(n,{LeaderboardFeature:function(){return r.LeaderboardFeature}}),t.o(r,"LocaleProvider")&&t.d(n,{LocaleProvider:function(){return r.LocaleProvider}}),t.o(r,"PresenceProvider")&&t.d(n,{PresenceProvider:function(){return r.PresenceProvider}}),t.o(r,"SettingsFeature")&&t.d(n,{SettingsFeature:function(){return r.SettingsFeature}}),t.o(r,"buildUpdates")&&t.d(n,{buildUpdates:function(){return r.buildUpdates}}),t.o(r,"useAcceptFriendRequest")&&t.d(n,{useAcceptFriendRequest:function(){return r.useAcceptFriendRequest}}),t.o(r,"useAcceptGameInvite")&&t.d(n,{useAcceptGameInvite:function(){return r.useAcceptGameInvite}}),t.o(r,"useAcceptedFriends")&&t.d(n,{useAcceptedFriends:function(){return r.useAcceptedFriends}}),t.o(r,"useAnalyticScreen")&&t.d(n,{useAnalyticScreen:function(){return r.useAnalyticScreen}}),t.o(r,"useAppPanelVisible")&&t.d(n,{useAppPanelVisible:function(){return r.useAppPanelVisible}}),t.o(r,"useAwayOrOfflineFriends")&&t.d(n,{useAwayOrOfflineFriends:function(){return r.useAwayOrOfflineFriends}}),t.o(r,"useBlockFriend")&&t.d(n,{useBlockFriend:function(){return r.useBlockFriend}}),t.o(r,"useClearNotifications")&&t.d(n,{useClearNotifications:function(){return r.useClearNotifications}}),t.o(r,"useDismissFriendRequest")&&t.d(n,{useDismissFriendRequest:function(){return r.useDismissFriendRequest}}),t.o(r,"useDismissGameInvite")&&t.d(n,{useDismissGameInvite:function(){return r.useDismissGameInvite}}),t.o(r,"useFlags")&&t.d(n,{useFlags:function(){return r.useFlags}}),t.o(r,"useFriendLinking")&&t.d(n,{useFriendLinking:function(){return r.useFriendLinking}}),t.o(r,"useFriendSearchResults")&&t.d(n,{useFriendSearchResults:function(){return r.useFriendSearchResults}}),t.o(r,"useFriendsMap")&&t.d(n,{useFriendsMap:function(){return r.useFriendsMap}}),t.o(r,"useGameJoin")&&t.d(n,{useGameJoin:function(){return r.useGameJoin}}),t.o(r,"useGameSendInvite")&&t.d(n,{useGameSendInvite:function(){return r.useGameSendInvite}}),t.o(r,"useHotKeyPressed")&&t.d(n,{useHotKeyPressed:function(){return r.useHotKeyPressed}}),t.o(r,"useIncomingFriendRequests")&&t.d(n,{useIncomingFriendRequests:function(){return r.useIncomingFriendRequests}}),t.o(r,"useInvitesToAllGames")&&t.d(n,{useInvitesToAllGames:function(){return r.useInvitesToAllGames}}),t.o(r,"useInvitesToMyGame")&&t.d(n,{useInvitesToMyGame:function(){return r.useInvitesToMyGame}}),t.o(r,"useIsFeatureEnabled")&&t.d(n,{useIsFeatureEnabled:function(){return r.useIsFeatureEnabled}}),t.o(r,"useLastOnline")&&t.d(n,{useLastOnline:function(){return r.useLastOnline}}),t.o(r,"useLastOnlineMap")&&t.d(n,{useLastOnlineMap:function(){return r.useLastOnlineMap}}),t.o(r,"useLocale")&&t.d(n,{useLocale:function(){return r.useLocale}}),t.o(r,"useMyAppFriends")&&t.d(n,{useMyAppFriends:function(){return r.useMyAppFriends}}),t.o(r,"useMyAppId")&&t.d(n,{useMyAppId:function(){return r.useMyAppId}}),t.o(r,"useMyAppName")&&t.d(n,{useMyAppName:function(){return r.useMyAppName}}),t.o(r,"useMyOnlineAppFriends")&&t.d(n,{useMyOnlineAppFriends:function(){return r.useMyOnlineAppFriends}}),t.o(r,"useMySettings")&&t.d(n,{useMySettings:function(){return r.useMySettings}}),t.o(r,"useNotMyAppFriends")&&t.d(n,{useNotMyAppFriends:function(){return r.useNotMyAppFriends}}),t.o(r,"useOnlineFriendsNotInMyApp")&&t.d(n,{useOnlineFriendsNotInMyApp:function(){return r.useOnlineFriendsNotInMyApp}}),t.o(r,"usePlatformInfo")&&t.d(n,{usePlatformInfo:function(){return r.usePlatformInfo}}),t.o(r,"usePlatformName")&&t.d(n,{usePlatformName:function(){return r.usePlatformName}}),t.o(r,"usePresence")&&t.d(n,{usePresence:function(){return r.usePresence}}),t.o(r,"usePresenceMap")&&t.d(n,{usePresenceMap:function(){return r.usePresenceMap}}),t.o(r,"useRemoveNotification")&&t.d(n,{useRemoveNotification:function(){return r.useRemoveNotification}}),t.o(r,"useSearchByTerm")&&t.d(n,{useSearchByTerm:function(){return r.useSearchByTerm}}),t.o(r,"useSendFriendRequest")&&t.d(n,{useSendFriendRequest:function(){return r.useSendFriendRequest}}),t.o(r,"useSettingsService")&&t.d(n,{useSettingsService:function(){return r.useSettingsService}}),t.o(r,"useSortedNotifications")&&t.d(n,{useSortedNotifications:function(){return r.useSortedNotifications}}),t.o(r,"useUnblockFriend")&&t.d(n,{useUnblockFriend:function(){return r.useUnblockFriend}});var i=t(96767),a=t(17786),o=t(18583),u=t(33769),s=t(71507),c=t(13815),d=t(78875),l=t(60857),f=t(69465),p=t(65212),v=t(31975),h=t(58167),y=t(53133),m=t(43410);t.o(m,"AchievementsFeature")&&t.d(n,{AchievementsFeature:function(){return m.AchievementsFeature}}),t.o(m,"LeaderboardFeature")&&t.d(n,{LeaderboardFeature:function(){return m.LeaderboardFeature}}),t.o(m,"SettingsFeature")&&t.d(n,{SettingsFeature:function(){return m.SettingsFeature}}),t.o(m,"useAnalyticScreen")&&t.d(n,{useAnalyticScreen:function(){return m.useAnalyticScreen}}),t.o(m,"useMySettings")&&t.d(n,{useMySettings:function(){return m.useMySettings}}),t.o(m,"useSettingsService")&&t.d(n,{useSettingsService:function(){return m.useSettingsService}});var b=t(93103),g=t(83022),w=t(62283)},36452:(e,n,t)=>{"use strict";t.d(n,{W:()=>u});var r=t(25180),i=t(58640),a=t(73450),o=function(){function e(n,t){(0,r.Z)(this,e),(0,a.Z)(this,"reason",void 0),(0,a.Z)(this,"version",void 0),(0,a.Z)(this,"initializations",[]),this.reason=n,this.version=t}return(0,i.Z)(e,[{key:"state",value:function(e,n){return this.add(e,n,!1)}},{key:"collection",value:function(e,n,t){return this.add(e,n,!0,t)}},{key:"add",value:function(e,n,t,r){var i={feature:e.feature,name:e.name,collection:t,keyName:r,reason:this.reason,version:this.version,state:n};return this.initializations.push(i),this}},{key:"build",value:function(){return this.initializations}}]),e}();function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initialization",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1.0.0";return new o(e,n)}},96767:(e,n,t)=>{"use strict";t.d(n,{Y:()=>xt});var r=t(19394),i=t(76772),a=t(35004),o=t(57135),u=t.n(o),s=t(41476),c=t(25926),d=t(84670),l=t(36528),f=[function(e){(0,a.K)(e).subscribe((function(e){var n=e.authToken,t=e.elevatedToken;i.m.setAuthToken(t||n)}))},function(){var e=(0,s.Z)(u().mark((function e(n){var t,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.service(l.g),e.next=3,n.waitFor(d.Qb,(function(e){return""!==e.id}));case 3:return e.next=5,n.waitFor(c.bX);case 5:"egs-launcher"!==(null==(r=e.sent)?void 0:r.platformName)&&(i={type:"status",payload:{status:"online"}},t.addNotification(i));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()],p=t(83022),v=t(68425),h=t(78146),y=t(85321),m=t(28043),b=t(55935),g=t(93508);function w(e,n,t){return e.changes(n).pipe((0,g.O)(e.get(n)),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return function(t){return t.pipe((0,v.J)(),(0,h.v)((function(e){return e[n]})),(0,y.zg)((function(n){return n.pipe((0,m.x)((function(n,t){return!e(n,t)})),(0,b.T)(1))})))}}(t))}var k=t(24209),S=t(76974),I=t(75017),x=t(99945);function A(e,n){var t=null;(0,k.T)((0,S.of)(e.get((0,x.u)(n.flag))),e.changes((0,x.u)(n.flag))).subscribe((function(e){e?t=n.enable():t&&t()}))}function O(e,n){return function(t){!function(e,n){var t=null;(0,k.T)((0,S.of)(e.get((0,I.z)(n.feature))),e.changes((0,I.z)(n.feature))).subscribe((function(e){e?t=n.enable():t&&t()}))}(t,{feature:e,enable:function(){return n(t)}})}}var T=t(38381),F=function(e,n){return"earned"!==e.status&&"earned"===n.status},P=O(p.Hb,(function(e){var n=e.service(l.g),t=w(e,p.Xn,F),r=Object.keys(e.get(p.KJ)).length>0,i=t.subscribe((function(e){r||function(e,t){var r={type:"earned-achievement",payload:{id:e.id,name:e.name,iconUrl:e.iconUrl}};n.addNotification(r)}(e)}));return function(){return i.unsubscribe()}})),Z=(O(p.Gy,(function(e){var n=e.service(l.g),t=w(e,p.Xn,F),r=(0,T.useSharedValue)(p.KJ),i=t.subscribe((function(e){!function(e,t){var i=e.name,a={type:"earned-egs-achievement",payload:{title:i,unlockedIconLink:r[i].unlockedIconLink,XP:r[i].XP,tier:r[i].tier}};n.addNotification(a)}(e)}));return function(){return i.unsubscribe()}})),t(40649)),N=t(85985),E=t(97826),C=t(94564);function U(e){return{sandboxId:e.pfsid}}var j=[P,function(){var e=(0,s.Z)(u().mark((function e(n){var t,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e){var n=U(e).sandboxId;if(n){var r={name:"fetch-egs-data",feature:p.Gy,payload:{sandboxId:n,locale:i}};t.sendIntent(r)}},n.get(C.v)["egs-achievements-enabled"]){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.waitFor(c.p0);case 6:t=e.sent,r=n.get(E.my),i=r.locale,n.changes(c.J).pipe((0,Z.g)("pfsid"),(0,N.h)((function(e){return Boolean(null==e?void 0:e.pfsid)}))).subscribe((function(e){e&&a(e)}));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()],M=t(81687),R=t(61658),D={intercept:function(e,n){var t=n.get(R.x2),r=n.get(c.bX);return(0,M.addToPayload)(e,{Platform:(null==r?void 0:r.platformName)||"unknown",CurrentGameId:t.appId,Joinable:t.invitesAllowed,CurrentGameName:t.appName})}},q={intercept:function(e){return(0,M.addToPayload)(e,{Env:"prod"})}},_=t(73450),L=t(14754),G=t(27882),$=t(69782);function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var X={shouldIntercept:function(e){var n=e.payload;return function(e){return"ScreenViewed"===e.Event}(n)&&n.Name===L.ScreenName.Friends},intercept:function(e,n){var t,r,i=n.get(R.AI),a=n.get($.ct),o=n.get(G.T),u=(t={},(0,_.Z)(t,L.UserState.Online,0),(0,_.Z)(t,L.UserState.Offline,0),(0,_.Z)(t,L.UserState.Away,0),t),s={},c={},d=function(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}(a);try{for(d.s();!(r=d.n()).done;){var l=r.value,f="appId"in l?l.appId:"_";switch(B(u,status),status){case"online":B(s,f);break;case"away":case"extendedAway":B(c,f)}}}catch(e){d.e(e)}finally{d.f()}return(0,M.addToPayload)(e,{Name:e.payload.Name,IncomingGameInvites:i.length,FriendCountByPresence:u,OnlineFriendCountByApp:s,AwayFriendCountByApp:c,BadgeCount:o.length})}};function B(e,n){if(n&&n.length>0){var t=e[n]||0;e[n]=t+1}}var z,J={intercept:function(e){return(0,M.addToPayload)(e,{GitHash:"71f53c3bcc290cd53b8dcd6bedf8f311acbb7755"})}},H=t(1825),K={shouldIntercept:function(e){return!!e.tags&&e.tags.includes("intent")},intercept:(z=(0,s.Z)(u().mark((function e(n,t){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return t.waitForNext(E.ch,(function(e){return e.id===i}))},r=Date.now(),i=n.payload.IntentId,"processing"!==(null==(o=t.get((0,H.P)(i)))?void 0:o.status)){e.next=10;break}return e.next=7,a();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:return s=e.t0,e.abrupt("return",(0,M.addToPayload)(n,{DurationMs:Date.now()-r,isSuccess:"complete"===s.status,ErrorMessage:s.errorMessage||s.errorCode||"unknown error"}));case 13:case"end":return e.stop()}}),e)}))),function(e,n){return z.apply(this,arguments)})},Q={id:"launch-time"},W={id:"overlay-open-time",defaultValue:0},Y={id:"pending-intents",defaultValue:{}},ee={id:"overlay-open-count",defaultValue:0},ne={id:"game-invites-sent",defaultValue:0},te={id:"game-invites-received",defaultValue:0},re={id:"game-invites-accepted",defaultValue:0},ie={intercept:function(e,n){var t=Date.now(),r=n.get(Q),i=n.get(W);return(0,M.addToPayload)(e,{LaunchTime:r,MsSinceLaunch:t-r,OverlayOpenTime:i})}},ae={intercept:function(e,n){var t=n.get(c.bX);return(0,M.addToPayload)(e,{PlatformVersion:t?t.platformVersion:"0.0.0",PlatformName:t?t.platformName:"unknown",OsName:t?t.osName:"unknown",OsVersion:t?t.osVersion:"0.0.0",ProductName:t?t.productName:"unknown",ProductVersion:t?t.productVersion:"0.0.0",ProductId:t?t.productId:"unknown"})}},oe=t(71507),ue={shouldIntercept:function(e){return"Search"===e.payload.Event},intercept:function(e,n){var t,r=(null===(t=n.get(oe.ok))||void 0===t?void 0:t.length)||0;return(0,M.addToPayload)(e,{ResultCount:r})}},se=t(43410),ce=[q,D,X,K,ie,ue,{intercept:function(e,n){var t=n.get(se.Settings),r=n.get(d.Qb).id;return(0,M.addToPayload)(e,{AccountId:r,CurrentState:L.UserState.Online,isDoNotDisturbEnabled:t.donotdisturb})}},ae,J];function de(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return le(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?le(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function fe(e,n){return pe.apply(this,arguments)}function pe(){return(pe=(0,s.Z)(u().mark((function e(n,t){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n,i=de(ce),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=18;break}if(o=a.value,s=o.shouldIntercept,c=o.intercept,e.prev=6,s&&!s(r)){e.next=11;break}return e.next=10,c(r,t);case 10:r=e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),i.e(e.t1);case 23:return e.prev=23,i.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,null,[[2,20,23,26],[6,13]])})))).apply(this,arguments)}function ve(e){var n=e.code,t=e.payload;return{name:"log-analytic",feature:E.gn,payload:{eventName:n,data:t}}}var he=function(){var e=(0,s.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.waitFor(c.bX);case 2:(0,M.sendAnalytic)({code:"eos.social.appstartup",payload:{Event:"AppStartup"}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function ye(e){return function(n){return n.get(Y)[e]}}function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ge(e,n){return function(t){function r(){return(r=(0,s.Z)(u().mark((function r(i){var a,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i.id,r.next=3,t.waitFor(ye(a));case 3:o=r.sent,(0,M.sendAnalytic)({code:"eos.social.".concat(e),tags:["intent"],payload:be({IntentId:a},n(o,t))});case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}t.stream(E.Pz).pipe((0,N.h)((function(n){return n.intentName===e}))).subscribe((function(e){!function(e){r.apply(this,arguments)}(e)}))}}function we(e,n){return ge(e,(function(e){return{Event:"ClientFriendship",OtherUserId:e.payload.id,Type:n,Method:L.CommonMethod.Click}}))}var ke=[ge("query-friend-search",(function(){return{Event:"Search",Type:L.SearchType.Friends}})),we("request-friend",L.FriendshipActionType.SendRequest),we("accept-friend-request",L.FriendshipActionType.AcceptRequest),we("dismiss-friend-request",L.FriendshipActionType.IgnoreRequest),we("block-friend",L.FriendshipActionType.Block),we("unblock-friend",L.FriendshipActionType.Unblock)],Se=t(94607),Ie=t(77176),xe=t(287),Ae=ge("game-invite",(function(e,n){return n.set(ne,n.get(ne)+1),Te(n,L.InviteActionType.Send,e.payload.id)})),Oe=ge("join-game",(function(e,n){return Te(n,L.InviteActionType.Join,e.payload.friendId)}));function Te(e,n,t){var r=e.get((0,xe.N)(t));return r&&"appName"in r?{Event:"Invite",InviteType:L.InviteType.Game,Type:n,OtherUserId:t,OtherUserGameId:r.appId,OtherUserGameName:r.appName,Method:L.CommonMethod.Click,isJoinable:r.joinable,isOnline:"online"===r.status}:{Event:"Invite",InviteType:L.InviteType.Game,Type:n,OtherUserId:t,OtherUserGameId:"unknown",OtherUserGameName:"unknown",Method:L.CommonMethod.Click,isJoinable:!1,isOnline:!1}}var Fe=[Ae,ge("accept-game-invite",(function(e,n){return n.set(re,n.get(re)+1),Te(n,L.InviteActionType.Accept,e.payload.friendId)})),ge("dismiss-game-invite",(function(e,n){return Te(n,L.InviteActionType.Dismiss,e.payload.friendId)})),Oe,function(e){e.changes(R.AI).pipe((0,v.J)(),(0,Se.E)((function(e){return e.key})),(0,Ie.U)((function(n){return Te(e,L.InviteActionType.Receive,n.friendId)}))).subscribe((function(n){e.set(te,e.get(te)+1),(0,M.sendAnalytic)({code:"eos.social.game-invite-received",tags:[],payload:n})}))}],Pe=t(24535),Ze=t(77843),Ne=function(){var e=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){(0,M.sendAnalytic)({code:"eos.social.heartbeat",payload:{Event:"HeartBeat",GameInvitesRecieved:n.get(te),OverlayOpenCount:n.get(ee),GameInvitesAccepted:n.get(re),GameInvitesSent:n.get(ne)}})},e.next=3,n.waitFor(c.bX);case 3:t(),(0,Ze.F)(Pe.V6).subscribe((function(){return t()}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ee=t(64897),Ce=t(24713),Ue=t(16118),je=function(){var e=(0,s.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.waitFor(c.p0);case 2:t=e.sent,n.stream(E.ch).subscribe((function(e){var t=e.id;n.modify(Y,(function(e){delete e[t]}))})),r=t.sendIntent,t.sendIntent=function(){var e=(0,s.Z)(u().mark((function e(i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.call(t,i);case 2:return a=e.sent,n.modify(Y,(function(e){e[a.id]=i})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Me=ge("add-notification",(function(e){return{Event:"AddNotification",NotificationType:e.payload.type}})),Re=[function(e){function n(){return(n=(0,s.Z)(u().mark((function n(t){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe(t,e);case 2:return r=n.sent,n.next=5,e.waitFor(c.p0);case 5:n.sent.sendIntent(ve(r));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(0,M.setAnalyticsHandler)((function(e){!function(e){n.apply(this,arguments)}(e)}))},he].concat((0,r.Z)(ke),(0,r.Z)(Fe),[Ne,function(e){e.changes(R.x2).pipe((0,Ce.j)("invitesAllowed"),(0,m.x)(),(0,Ue.G)()).subscribe((function(n){var t=(0,Ee.Z)(n,1)[0],r=e.get(se.Settings);(0,M.sendAnalytic)({code:"eos.social.statechange",payload:{Event:"StateChange",PreviousState:L.UserState.Online,PreviousJoinable:t,PreviousDoNotDisturbEnabled:r.donotdisturb}})}))},function(e){e.changes(E.XM).pipe((0,g.O)(e.get(E.XM)),(0,m.x)(),(0,N.h)((function(e){return"entered"===e}))).subscribe((function(){e.set(W,Date.now())}))},function(e){e.set(Q,Date.now())},function(e){e.changes(E.XM).pipe((0,m.x)(),(0,N.h)((function(e){return"exited"===e}))).subscribe((function(){(0,M.sendAnalytic)({code:"eos.social.overlayclosed",payload:{Event:"OverlayClose",Method:L.CommonMethod.Click}})}))},je,function(e){var n=e.service(l.g);e.changes(se.Settings).pipe((0,Ue.G)()).subscribe((function(t){var r=(0,Ee.Z)(t,2),i=r[0],a=r[1],o=e.get(R.x2).invitesAllowed;if((0,M.sendAnalytic)({code:"eos.social.settingschanged",payload:{Event:"StateChange",PreviousState:L.UserState.Online,PreviousJoinable:o,PreviousDoNotDisturbEnabled:i.donotdisturb}}),i.donotdisturb!==a.donotdisturb){var u={type:"settings-toggle",payload:{name:"donotdisturb",value:a.donotdisturb}};n.addNotification(u)}if(i.autodecline!==a.autodecline){var s={type:"settings-toggle",payload:{name:"autodecline",value:a.autodecline}};n.addNotification(s)}}))},function(e){e.changes(E.XM).pipe((0,m.x)(),(0,N.h)((function(e){return"entered"===e}))).subscribe((function(){e.set(ee,e.get(ee)+1),(0,M.sendAnalytic)({code:"eos.social.overlayopened",payload:{Event:"OverlayOpen",Method:L.CommonMethod.Click}})}))},Me,function(e){e.changes(E.XM).pipe((0,g.O)(e.get(E.XM)),(0,m.x)(),(0,N.h)((function(e){return"exited"===e}))).subscribe((function(){var n=Date.now(),t=e.get(W),r=t>0?n-t:0;(0,M.sendAnalytic)({code:"eos.social.overlayopentime",payload:{Event:"OverlayOpenTime",MsSinceOverlayOpen:r}})}))},function(e){e.stream(E.ob).subscribe((function(e){!function(e){var n="INTENT ERROR (".concat(e.intentName,"):  ").concat(e.errorCode);e.errorMessage&&(n+=" - ".concat(e.errorMessage)),console.error(n)}(e),(0,M.sendAnalytic)({code:"eos.social.intenterror",payload:{IntentName:e.intentName,ErrorCode:e.errorCode,ErrorMessage:e.errorMessage}})}))}]);function De(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return e.pipe((0,v.J)(),(0,h.v)((function(e){return e.id})),(0,y.zg)((function(e){return e.pipe((0,Z.g)("status"),(0,N.h)((function(e){return n.includes(e.status)})))})))}}function qe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(n){n.changes(E.bo).pipe(De.apply(void 0,t)).subscribe((function(t){n.dispatch(e,t)}))}}var _e=t(88671),Le=t(55721);function Ge(e){var n=e.service(_e.I),t=e.get(G.T).length>0,r=e.get(E.XM),i="exited"!==r,a="entered"===r;n.updateDisplay({visible:t||i,exclusiveInput:a})}var $e=t(95399),Ve=t(66310),Xe=[function(e){Ge(e),(0,k.T)(e.changes(E.XM),e.changes(G.T)).pipe((0,Le.p)(100)).subscribe((function(){Ge(e)}))},function(e){var n=e.service(_e.I);e.changes(E.XM).pipe((0,Ve.w)((function(n){return t="exited"!==n?E.Gx:E.rO,r=e.get(t),(0,$e.z)((0,S.of)(r),e.changes(t));var t,r}))).subscribe((function(t){e.set(E.TL,t),n.updateDisplay({hitBox:t})}))},qe(E.Pz,"processing"),qe(E.ob,"error"),qe(E.$4,"complete"),qe(E.ch,"complete","error"),function(e){var n=e.service(l.g);e.stream(E.ob).pipe((0,N.h)((function(e){return"log-analytic"!==e.intentName}))).subscribe((function(e){var t={type:"error",payload:{errorMessage:e.errorMessage}};n.addNotification(t)}))}];function Be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ze(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Be(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Je(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var He=t(23063),Ke=function(){var e=(0,s.Z)(u().mark((function e(n){var t,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n){var r={type:n,payload:{friendId:e.id}};t.addNotification(r)},t=n.service(l.g),e.next=4,n.changes(oe._O).pipe((0,He.q)(1)).toPromise();case 4:r=e.sent,i=r,n.changes(oe._O).subscribe((function(e){e.filter((function(e){return"incoming"===e.type&&!i.find((function(n){return n.id===e.id}))})).forEach((function(e){n.get((0,I.z)(oe.RK))&&a(e,"friend-request")}))})),n.changes(oe._O).subscribe((function(e){e.filter((function(e){return"accepted"===e.type&&i.find((function(n){return n.id===e.id&&"outgoing"===n.type}))})).forEach((function(e){n.get((0,I.z)(oe.RK))&&a(e,"friend-request-accepted")}))})),n.changes(oe._O).subscribe((function(e){var r=n.get(G.T);i.filter((function(n){return!e.includes(n)})).forEach((function(e){var n=r.find((function(n){return("friend-request"===n.type||"friend-request-accepted"===n.type)&&n.payload.friendId===e.id}));n&&t.removeNotification(n)}))})),n.changes(oe._O).subscribe((function(e){i=e}));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function Qe(e,n,t){return function(r){r.changes(e).subscribe((function(e){r.set(n,function(e,n){var t={};return e.forEach((function(e){var r=n(e);e!==t[r]&&(t[r]=e)})),t}(e,t))}))}}var We=t(26070),Ye=t(80176),en=t(26599),nn=t(82180),tn=t(2844),rn=0,an=0;function on(){var e=new CustomEvent("epic-social.friends",{detail:{count:rn}});document.dispatchEvent(e)}function un(){var e=new CustomEvent("epic-social.notifications",{detail:{count:an}});document.dispatchEvent(e)}nn.Z&&document.addEventListener("epic-social.request-values",(function(){on(),un()}));var sn=[Qe(oe._O,oe.l3,(function(e){return e.id})),Ke,function(e){e.changes(oe.l3).subscribe((function(n){e.modify(oe.ok,(function(e){var t,r=function(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Je(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.id;n[a]||"outgoing"!==i.type&&"incoming"!==i.type||Object.assign(i,ze(ze({},i),{},{type:"NOT_FRIEND",friendshipStatus:"NOT_FRIEND"}))}}catch(e){r.e(e)}finally{r.f()}}))}))},function(e){var n;e.changes(E.sc).pipe((n="pressed",!0,!1,function(e){return e.pipe((0,m.x)(),(0,Ue.G)(),(0,N.h)((function(e){var t=(0,Ee.Z)(e,2),r=t[0],i=t[1];return true===r[n]&&false===i[n]})),(0,Ie.U)((function(e){return(0,Ee.Z)(e,2)[1]})))})).subscribe((function(){e.dispatch(E.$x,{reason:"hotkey-pressed"})}))},function(e){e.changes(We.a3).pipe((0,Ie.U)((function(e){return e.length}))).subscribe((function(e){rn=e,on()}));var n=e.changes(en.h).pipe((0,g.O)(e.get(en.h)),(0,Ie.U)((function(e){return e.length}))),t=e.changes(Ye.X).pipe((0,g.O)(e.get(Ye.X)),(0,Ie.U)((function(e){return e.length})));(0,tn.aj)(n,t).pipe((0,Ie.U)((function(e){var n=(0,Ee.Z)(e,2);return n[0]+n[1]}))).subscribe((function(e){an=e,un()}))}];function cn(e,n){return function(t){return t.pipe((0,v.J)(),(0,h.v)((function(n){return n[e]})),(0,y.zg)((function(e){return e.pipe((0,Z.g)(n),(0,b.T)(1))})))}}var dn=function(e){return e.pipe(cn("id","appId"))},ln=t(84418),fn=t(2768),pn=t(17343);function vn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function hn(e,n){var t,r,i=e.service(ln.h),a=function(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return vn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vn(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}(e.get((t=n,function(e){return e.get(R.AI).filter((function(e){return e.friendId===t}))})));try{for(a.s();!(r=a.n()).done;){var o=r.value;i.dismissGameInvite(o)}}catch(e){a.e(e)}finally{a.f()}}var yn=[function(e){A(e,{flag:"auto-dismiss-stale-invites-enabled",enable:function(){var n=function(e){var n,t,r=e.service(ln.h);return e.changes(R.AI).pipe((n=Pe.lS,t="key",function(e){return e.pipe((0,v.J)(),(0,h.v)((function(e){return e[t]})),(0,y.zg)((function(r){var i=e.pipe(function(e,n){var t=function(t){return!t.find((function(t){return t[e]===n}))};return function(e){return e.pipe((0,N.h)(t),(0,pn.h)(!0))}}(t,r.key));return r.pipe((0,Se.E)(void 0,i),(0,Ve.w)((function(e){return(0,Ze.F)(n).pipe((0,fn.R)(i),(0,pn.h)(e))})))})))})).subscribe((function(e){r.dismissGameInvite(e)}))}(e),t=function(e){return e.changes($.ct).pipe(dn).subscribe((function(n){hn(e,n.id)}))}(e),r=function(e){return e.changes($.ct).pipe(function(e){return function(n){return n.pipe((t="status",r=e,function(e){return e.pipe(cn("id",t),(0,N.h)((function(e){return e[t]===r})))}));var t,r}}("offline")).subscribe((function(n){hn(e,n.id)}))}(e);return function(){n.unsubscribe(),t.unsubscribe(),r.unsubscribe()}}})},function(e){var n=e.service(l.g);e.changes(R.AI).pipe((0,g.O)([]),(0,Ue.G)()).subscribe((function(e){var t=(0,Ee.Z)(e,2),r=t[0];t[1].filter((function(e){return!r.includes(e)})).forEach((function(e){n.addNotification({type:"invite",payload:{appId:e.appId,appName:e.appName,friendId:e.friendId}})}))}))}],mn=t(25180),bn=t(58640),gn=t(32952);function wn(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return kn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kn(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function kn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Sn=function(){function e(n,t){(0,mn.Z)(this,e),(0,_.Z)(this,"primary",void 0),(0,_.Z)(this,"platforms",void 0),(0,_.Z)(this,"platformIndex",void 0),this.primary=n,this.platforms=[n].concat((0,r.Z)(t)),this.platformIndex=null}var n,t,i,a,o,c;return(0,bn.Z)(e,[{key:"getPlatforms",value:function(){return this.platforms}},{key:"getPrimaryPlatform",value:function(){return this.primary}},{key:"register",value:(c=(0,s.Z)(u().mark((function e(n){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.platformIndex){e.next=3;break}return e.next=3,this.getFeatures();case 3:return e.next=5,this.registerPlatforms(this.platforms);case 5:return t=e.sent,i=t.reduce((function(e,n){return e.concat(n.initialization)}),new Array),a=t.map((function(e){return e.updates})),k.T.apply(void 0,(0,r.Z)(a)).subscribe(n),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getInfo",value:(o=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.primary.getInfo());case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getFeatures",value:(a=(0,s.Z)(u().mark((function e(){var n,t,r,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Set,t=wn(this.platforms),e.prev=2,i=u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,e.next=3,t.getFeatures();case 3:e.sent.forEach((function(e){n.add(e),a.setFeaturePlatform(e,t)}));case 5:case"end":return e.stop()}}),e)})),t.s();case 5:if((r=t.n()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),t.e(e.t1);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",Array.from(n));case 18:case"end":return e.stop()}}),e,this,[[2,11,14,17]])}))),function(){return a.apply(this,arguments)})},{key:"sendIntent",value:(i=(0,s.Z)(u().mark((function e(n){var t,r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.platformIndex){e.next=3;break}return e.next=3,this.getFeatures();case 3:this.logIntent(n),t=this.featurePlatforms(n.feature),r=wn(t),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=17;break}return a=i.value,e.next=12,a.sendIntent(n);case 12:if("not-sent"===(o=e.sent).status){e.next=15;break}return e.abrupt("return",o);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return s="No platforms found that supports feature ".concat(n.feature," for intent ").concat(n.name),console.warn(s),e.abrupt("return",Promise.resolve({id:"".concat(n.feature,"-").concat(n.name),correlationId:"",intentName:n.name,status:"error",errorCode:"no.feature.platform",errorMessage:s}));case 28:case"end":return e.stop()}}),e,this,[[6,19,22,25]])}))),function(e){return i.apply(this,arguments)})},{key:"registerPlatforms",value:(t=(0,s.Z)(u().mark((function e(n){var t,r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=wn(n),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=8,this.registerPlatform(a);case 8:o=e.sent,t.push(o);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e){return t.apply(this,arguments)})},{key:"registerPlatform",value:(n=(0,s.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new gn.xQ,e.next=3,n.register((function(e){t.next(e)}));case 3:return r=e.sent,e.abrupt("return",{initialization:r,updates:t});case 5:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"featurePlatforms",value:function(e){if(this.platformIndex)return this.platformIndex[e];throw Error("Platforms not initialized")}},{key:"setFeaturePlatform",value:function(e,n){this.platformIndex||(this.platformIndex={});var t=this.platformIndex[e];t?t.push(n):this.platformIndex[e]=[n]}},{key:"logIntent",value:function(e){}}]),e}();function In(e){return!0===e.collection}function xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function An(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xn(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function On(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Tn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tn(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function Tn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Fn(e,n){var t,i=On(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;In(a)?u(e,a):o(e,a)}}catch(e){i.e(e)}finally{i.f()}function o(e,n){var t=n.feature,r=n.name,i=n.state,a=(0,c.Rl)(t,r);e.modify(a,(function(e){if(!function(e){return null!==e&&!Array.isArray(e)&&"object"==typeof e}(e))return i;Object.assign(e,i)}))}function u(e,n){var t=n.feature,i=n.name,a=n.keyName,o=n.state,u=n.add,s=n.remove,d=n.update,l=(0,c.Rl)(t,i,[]);if(o)return e.set(l,o);e.modify(l,(function(e){u&&e.push.apply(e,(0,r.Z)(u)),s&&function(e,n,t){var r,i=On(t);try{var a=function(){var t=r.value,i=e.findIndex((function(e){return e[n]===t}));i>=0&&e.splice(i,1)};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}(e,a,s),d&&function(e,n,t){var r,i=On(t);try{var a=function(){var t=r.value,i=e.findIndex((function(e){return e[n]===t[n]}));i>=0&&function(e,n,t){e[n]=An(An({},e[n]),t)}(e,i,t)};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}(e,a,d)}))}}function Pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Zn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pn(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};return e.forEach((function(e){if(e.achievement){var t=e.achievement,r=t.XP,i=t.rarity,a=t.name;if(!a||!r||!i)return;n[a]=Zn(Zn({},e.achievement),{},{rarity:i.percent.toString()})}})),n}var En='\n    query egsAchievements($sandboxId: String, $locale: String = "en-US") {\n        Achievement {\n            productAchievementsBySandbox (sandboxId: $sandboxId, locale: $locale) {\n                achievement {\n                    sandboxId\n                    name\n                    unlockedDisplayName\n                    lockedDisplayName\n                    unlockedDescription\n                    lockedDescription\n                    rarity {\n                        percent\n                    }\n                    XP\n                    unlockedIconLink\n                    lockedIconLink\n                    tier {\n                        name\n                        hexColor\n                    }\n                }\n            }\n        }\n    }\n';const Cn=new(function(){function e(){(0,mn.Z)(this,e)}var n;return(0,bn.Z)(e,[{key:"getProductAchievementsBySandbox",value:(n=(0,s.Z)(u().mark((function e(n){var t,r,a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"en-US",e.prev=1,e.next=4,i.m.query(En,{sandboxId:n,locale:t});case 4:if(a=e.sent,o=null===(r=a.data.Achievement)||void 0===r?void 0:r.productAchievementsBySandbox){e.next=8;break}return e.abrupt("return");case 8:return e.abrupt("return",Nn(o));case 11:throw e.prev=11,e.t0=e.catch(1),console.error("getProductAchievementsBySandbox failed to retrieve data",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e){return n.apply(this,arguments)})}]),e}());var Un=t(36452),jn=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[p.Gy])}var n;return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){switch(e.name){case"fetch-egs-data":return this.fetchEgsData(e);default:return!1}}},{key:"fetchEgsData",value:(n=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn.getProductAchievementsBySandbox(n.payload.sandboxId,n.payload.locale);case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("EgsAchievementsPlatform error: ".concat(e.t0));case 9:if(!t){e.next=11;break}return e.abrupt("return",Promise.resolve((0,Un.W)().state(p.KJ,t).build()));case 11:return e.abrupt("return",Promise.resolve([]));case 12:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return n.apply(this,arguments)})}]),e}(),Mn=t(82670),Rn=t(31131),Dn=t(44117);const qn=new(function(){function e(){(0,mn.Z)(this,e)}var n;return(0,bn.Z)(e,[{key:"getExternalAuths",value:(n=(0,s.Z)(u().mark((function e(n){var t,r,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.m.query("\nquery account($accountId: String) {\n  Account {\n    account(id: $accountId) {\n      id\n      externalAuths {\n        type\n        externalDisplayName\n      }\n    }\n  }\n}\n",{accountId:n});case 3:return s=e.sent,c=null===(t=s.data)||void 0===t||null===(r=t.Account)||void 0===r||null===(a=r.account)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.externalAuths,e.abrupt("return",(0,Dn.q)(c));case 8:throw e.prev=8,e.t0=e.catch(0),console.error("getExternalAuths failed to retrieve data",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return n.apply(this,arguments)})}]),e}());var _n=t(84366),Ln=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[_n.N])}var n;return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){var n=e.name,t=e.payload;switch(n){case"request-external-auths":return this.getExternalAuths(t.id);case"clear-external-auths":return Promise.resolve(this.clearExternalAuths());default:return!1}}},{key:"getExternalAuths",value:(n=(0,s.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn.getExternalAuths(n);case 3:return t=e.sent,e.abrupt("return",(0,Rn.buildUpdates)("friends-external-auths").set(d.r9,t).build());case 7:if(e.prev=7,e.t0=e.catch(0),!(r=e.t0.serviceResponse)){e.next=12;break}throw Error(r.errorCode);case 12:throw Error("errors.com.epicgames.unknown");case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return n.apply(this,arguments)})},{key:"clearExternalAuths",value:function(){return(0,Rn.buildUpdates)("friends-external-auths").set(d.r9,[]).build()}}]),e}();function Gn(e){var n=[];if(!e)return n;for(var t=0;t<e.length;t++){var r,i,a,o=e[t],u=null===(r=o.account)||void 0===r?void 0:r[0];if(u){var s=u.friendshipStatus;switch(u.friendshipStatus){case"SENT_INVITE":s="outgoing";break;case"RECEIVED_INVITE":s="incoming";break;case"FRIEND":s="accepted"}n.push({id:u.id,displayName:u.displayName||(null===(i=u.externalAuths)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.externalDisplayName),friendshipStatus:u.friendshipStatus,type:s,externalAuths:(0,Dn.q)(u.externalAuths),epicMutuals:parseInt(o.epicMutuals||"0",10)})}}return n}const $n=new(function(){function e(){(0,mn.Z)(this,e)}var n;return(0,bn.Z)(e,[{key:"getSearchResultsByTerm",value:(n=(0,s.Z)(u().mark((function e(n){var t,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.m.query("\n    query getSearchResultsByTerm($searchTerm: String, $platform: String) {\n        ExtendedSearchResult {\n            extendedSearch(searchTerm: $searchTerm, platform: $platform) {\n                epicMutuals\n                account {\n                    id\n                    displayName\n                    friendshipStatus\n                    externalAuths{\n                        externalDisplayName\n                        type\n                    }\n                }\n            }\n        }\n    }\n",{searchTerm:n,platform:"epic"});case 3:if(r=e.sent,a=null===(t=r.data.ExtendedSearchResult)||void 0===t?void 0:t.extendedSearch){e.next=7;break}throw new Error("Extended search returned null in getSearchResultsByTerm()");case 7:return e.abrupt("return",Gn(a));case 10:throw e.prev=10,e.t0=e.catch(0),console.error("getSearchResultsByTerm failed to retrieve data",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){return n.apply(this,arguments)})}]),e}());var Vn=t(32935),Xn=t(17786),Bn=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[oe.RK])}var n,t,r,i,a;return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){var n=e.name,t=e.payload;switch(n){case"request-friend":case"accept-friend-request":return this.addFriend(t.id,n);case"dismiss-friend-request":return this.deleteFriend(t.id);case"query-friend-search":return this.queryFriendSearch(t.searchTerm);case"clear-search-results":return this.clearSearchResults();case"block-friend":return this.blockFriend(t.id);case"unblock-friend":return this.unblockFriend(t.id);default:return!1}}},{key:"addFriend",value:(a=(0,s.Z)(u().mark((function n(t,r){var i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Vn.Z.addFriend(t);case 3:if(n.sent){n.next=6;break}throw Error("friends-management.".concat(r,".unsuccessful"));case 6:n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(0),!(i=n.t0.serviceResponse)){n.next=13;break}throw Error(i.errorCode);case 13:if(n.t0.message!=="friends-management.".concat(r,".unsuccessful")){n.next=15;break}throw{errorCode:n.t0.message,errorMessage:"Friend request was unsuccessful"};case 15:throw Error("errors.com.epicgames.unknown");case 16:return n.abrupt("return",(0,Xn.Z)("friend-added").add($.ct,e.getInitialFriendPresence(t)).build());case 17:case"end":return n.stop()}}),n,null,[[0,8]])}))),function(e,n){return a.apply(this,arguments)})},{key:"blockFriend",value:(i=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn.Z.blockFriend(n);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(t=e.t0.serviceResponse)){e.next=10;break}throw Error(t.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return i.apply(this,arguments)})},{key:"unblockFriend",value:(r=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn.Z.unblockFriend(n);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(t=e.t0.serviceResponse)){e.next=10;break}throw Error(t.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteFriend",value:(t=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn.Z.deleteFriend(n);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(t=e.t0.serviceResponse)){e.next=10;break}throw Error(t.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return t.apply(this,arguments)})},{key:"queryFriendSearch",value:(n=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$n.getSearchResultsByTerm(n);case 3:return t=e.sent,e.abrupt("return",(0,Xn.Z)("new-friend-search-results").set(oe.ok,t).build());case 7:throw e.prev=7,e.t0=e.catch(0),Error("errors.com.epicgames.friends.search.down");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return n.apply(this,arguments)})},{key:"clearSearchResults",value:function(){return Promise.resolve((0,Xn.Z)("clear-search-results").set(oe.ok,[]).build())}}],[{key:"getInitialFriendPresence",value:function(e){return{id:e,status:"offline",appId:"",appName:"",joinable:!1,sameSession:!1,platform:"unknown",detailedStatus:""}}}]),e}(),zn=t(16764);const Jn=new(function(){function e(){(0,mn.Z)(this,e)}var n;return(0,bn.Z)(e,[{key:"getInitialLastOnline",value:(n=(0,s.Z)(u().mark((function e(){var n,t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.m.query("\nquery getLastOnlineSummary($namespace: String, $circle: String) {   \n    Presence {\n        getLastOnlineSummary(namespace: $namespace, circle: $circle) {\n            summary {\n                friendId\n                namespace\n                circle\n                last_online\n            }\n        }   \n    }\n}\n",{namespace:"_",circle:"friends"});case 3:if(t=e.sent,r=null===(n=t.data.Presence)||void 0===n?void 0:n.getLastOnlineSummary){e.next=7;break}throw new Error("LastOnline returned null when fetching getInitialLastOnline");case 7:return e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),console.error("LastOnline failed to retrieve data",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return n.apply(this,arguments)})}]),e}());function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};return e&&e.forEach((function(e){var t=e.friendId,r=e.last_online;t&&r&&(n[t]=new Date(r))})),n}var Kn=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[$.qc]),(0,_.Z)(this,"initialize",(0,s.Z)(u().mark((function e(){var n,t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Jn.getInitialLastOnline();case 3:return t=e.sent,r=null==t?void 0:t.summary,n=Hn(r),e.abrupt("return",Promise.resolve((0,Un.W)().state($.oo,n).build()));case 7:case"end":return e.stop()}}),e)}))))}return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){var n=e.name,t=e.payload;switch(n){case"update-friend":return this.updateFriend(t.friendId);default:return!1}}},{key:"updateFriend",value:function(e){var n=new Date;return Promise.resolve((0,Xn.Z)("update-friend-last-online").update($.oo,(0,_.Z)({},e,n)).build())}}]),e}(),Qn=t(11719);function Wn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var Yn=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[G.c])}return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){var n=e.name,t=e.payload;switch(n){case"add-notification":return this.addNotification(t);case"remove-notification":return this.removeNotification(t);case"clear-all-notifications":return this.clearAllNotifications();default:return!1}}},{key:"addNotification",value:function(e){return Promise.resolve((0,Xn.Z)("add-notification").add(G.T,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wn(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({id:(0,Qn.v4)()},e)).build())}},{key:"removeNotification",value:function(e){var n=e.id;return Promise.resolve((0,Xn.Z)("remove-notification").remove(G.T,n).build())}},{key:"clearAllNotifications",value:function(){return Promise.resolve((0,Xn.Z)("clear-all-notifications").set(G.T,[]).build())}}]),e}();function et(e,n){return nt.apply(this,arguments)}function nt(){return(nt=(0,s.Z)(u().mark((function e(n,t){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat({}.EPIC_TOKEN_EXCHANGE_URL,"/exchange"),i=JSON.stringify({exchangeCode:n,codeVerifier:t}),e.next=4,fetch(r,{method:"post",mode:"cors",referrerPolicy:"no-referrer-when-downgrade",headers:{"Content-Type":"application/json"},body:i});case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(u().mark((function e(n){var t,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat({}.EPIC_TOKEN_EXCHANGE_URL,"/refresh"),r=JSON.stringify({refreshToken:n}),e.next=4,fetch(t,{method:"post",mode:"cors",referrerPolicy:"no-referrer-when-downgrade",headers:{"Content-Type":"application/json"},body:r});case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it=t(80900),at=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[_n.k]),(0,_.Z)(this,"sendUpdates",void 0),this.sendUpdates=function(){}}var n,t;return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){switch(e.name){case"exchange-token":return this.exchangeToken(e);default:return!1}}},{key:"initialize",value:function(e){return this.sendUpdates=e,Promise.resolve([])}},{key:"exchangeToken",value:(t=(0,s.Z)(u().mark((function e(n){var t,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.payload,r=t.exchangeCode,i=t.codeVerifier,e.next=3,et(r,i);case 3:return a=e.sent,e.abrupt("return",this.handleResponse(a,"token-exchanged"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleResponse",value:function(e,n){return this.isError(e)?this.handleError(e):this.handleSuccess(e,n)}},{key:"handleSuccess",value:function(e,n){this.triggerRefreshTimer(e);var t={id:e.account_id,displayName:e.displayName,elevatedToken:e.access_token};return(0,Xn.Z)(n).update(d.Qb,t).build()}},{key:"triggerRefreshTimer",value:function(e){var n=this;if(e.expires_in>0){var t=1e3*e.expires_in;(0,it.H)(t).subscribe((function(){n.refreshToken(e.refresh_token)}))}}},{key:"refreshToken",value:(n=(0,s.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(n);case 2:t=e.sent,r=this.handleResponse(t,"token-refreshed"),this.sendUpdates(r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleError",value:function(e){return console.error("Error exchanging token",e),[]}},{key:"isError",value:function(e){return!!e.error}}]),e}(),ot=function(){function e(){(0,mn.Z)(this,e),(0,_.Z)(this,"features",[se.SettingsFeature])}var n;return(0,bn.Z)(e,[{key:"handleIntent",value:function(e){var n=e.name,t=e.payload;switch(n){case"update-settings":return this.updateSettings(t);default:return!1}}},{key:"updateSettings",value:(n=(0,s.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n.autodecline){e.next=12;break}return e.prev=1,e.next=4,Vn.Z.setPrivacySettings(n.autodecline?L.X.None:L.X.All);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(t=e.t0.serviceResponse)){e.next=11;break}throw Error(t.errorCode);case 11:throw Error("errors.com.epicgames.unknown");case 12:return e.abrupt("return",Promise.resolve((0,Xn.Z)("update-settings").update(se.Settings,n).build()));case 13:case"end":return e.stop()}}),e,null,[[1,6]])}))),function(e){return n.apply(this,arguments)})}]),e}();function ut(e){var n=e.get(c.bX),t=[new Yn,new at];"egs-launcher"!==(null==n?void 0:n.platformName)&&t.push(new ot);var r=new zn.S(t,{platformVersion:"0.0.0",platformName:"internal",productName:"internal-platform",productVersion:"0.0",productId:"unknown",osName:"Unknown",osVersion:"0"});function i(e){return r.addFeature(e),function(){a.apply(this,arguments)}(),function(){return r.removeFeature(e)}}function a(){return(a=(0,s.Z)(u().mark((function n(){var t,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.get(c.p0))){n.next=6;break}return n.next=4,t.getFeatures();case 4:r=n.sent,e.set(c.AN,r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return A(e,{flag:"friends-last-online-enabled",enable:function(){return i(new Kn)}}),A(e,{flag:"friends-management-enabled",enable:function(){return i(new Bn)}}),A(e,{flag:"friends-profile-enabled",enable:function(){return i(new Ln)}}),A(e,{flag:"epic-connect-enabled",enable:function(){return i(new Mn.U("wss://connect.epicgames.dev"))}}),A(e,{flag:"egs-achievements-enabled",enable:function(){return i(new jn)}}),r}var st=t(7104),ct=t(7288);function dt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function lt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dt(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ft(e){return function(){var n=(0,s.Z)(u().mark((function n(t){var r,i,a,o,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new st.LDClient(e),i=t.get(C.v),n.next=4,t.waitFor(d.Qb,(function(e){return!!e.id}));case 4:return a=n.sent,n.next=7,t.waitFor(c.bX);case 7:return o=n.sent,n.next=10,r.getFeatureFlags({accountId:a.id,flags:ct.u,custom:lt({},o)});case 10:s=n.sent,t.set(C.v,lt(lt({},i),s));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var pt=t(85496);function vt(e){return e==L.X.Private||e==L.X.None||e==L.X.FriendsOfFriends}function ht(e){return function(n){n.changes(C.v).pipe((0,y.zg)(function(){var n=(0,s.Z)(u().mark((function n(t){var r,i,a,o,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t["show-auto-decline-friends-enabled"],i=L.X.All,!r){n.next=12;break}return n.prev=3,n.next=6,Vn.Z.getPrivacySettings();case 6:i=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),console.error("InitializeSettingsEffect error: ".concat(n.t0));case 12:return n.next=14,e.getInfo();case 14:if(n.t1=n.sent.platformName,"egs-launcher"!=n.t1){n.next=35;break}if(a=(0,pt.l)(),o=a.isautodeclinefriendrequestsenabled,s=a.isshownotificationsenabled,n.t2=!!s,!n.t2){n.next=22;break}return n.next=21,s();case 21:n.t2=!n.sent;case 22:if(n.t3=n.t2,n.t4=vt(i),n.t4){n.next=31;break}if(n.t5=!!o,!n.t5){n.next=30;break}return n.next=29,o();case 29:n.t5=n.sent;case 30:n.t4=n.t5;case 31:return n.t6=n.t4,n.abrupt("return",{donotdisturb:n.t3,autodecline:n.t6});case 35:return n.abrupt("return",{autodecline:vt(i),donotdisturb:!1});case 36:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}())).subscribe((function(e){n.set(se.Settings,e)}))}}var yt=function(){var e=(0,s.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.waitFor(c.p0);case 2:return t=e.sent,e.next=5,t.getInfo();case 5:r=e.sent,n.set(c.bX,r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),mt=t(26601),bt=function(e){e.changes(d.Qb).pipe((0,N.h)((function(e){return e.authToken.length>0}))).subscribe((function(n){var t=n.authToken,r=(0,mt.Z)(t);e.set(c.J,r)}))};function gt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function wt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?gt(Object(t),!0).forEach((function(n){(0,_.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var kt=function(e,n){return"offline"!==e.status&&"offline"===n.status},St=O($.qc,(function(e){var n=w(e,$.ct,kt).subscribe((function(n){var t=e.get($.oo);e.set($.oo,wt(wt({},t),{},(0,_.Z)({},n.id,new Date)))}));return function(){return n.unsubscribe()}})),It=[Qe($.ct,$.gV,(function(e){return e.id})),St,function(e){function n(){return(n=(0,s.Z)(u().mark((function n(t){var r,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.waitFor(c.p0);case 2:r=n.sent,i={name:"connect-presence",feature:$.ut,payload:{account:t}},r.sendIntent(i);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(0,a.K)(e).subscribe((function(e){!function(e){n.apply(this,arguments)}(e)}))}];function xt(e,n,t){return[(o=t,function(){return i.m.initialize(o)}),ft(n),(a=e,function(){var e=(0,s.Z)(u().mark((function e(n){var t,r,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=(0,s.Z)(u().mark((function e(t){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.register((function(e){n.modify((function(n){return Fn(n,e)}))}));case 2:return r=e.sent,e.next=5,t.getFeatures();case 5:i=e.sent,n.modify((function(e){Fn(e,r),e.set(c.AN,i)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e){return o.apply(this,arguments)},t=ut(n),r=new Sn(a,[t]),e.next=7,i(r);case 7:n.set(c.p0,r);case 8:n.changes(c.p0).subscribe((function(e){i(e)}));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),ht(e),yt,bt].concat((0,r.Z)(Re),(0,r.Z)(sn),(0,r.Z)(yn),(0,r.Z)(It),(0,r.Z)(f),(0,r.Z)(Xe),(0,r.Z)(j));var a,o}},25926:(e,n,t)=>{"use strict";t.d(n,{p0:()=>r,AN:()=>i,bX:()=>a,J:()=>o,Rl:()=>u});var r={id:"feature-platform"},i={id:"features",defaultValue:[]},a={id:"platform-info"},o={id:"platform-metadata"};function u(e,n,t){return{id:"".concat(e,"-").concat(n),feature:e,name:n,defaultValue:t}}},82670:(e,n,t)=>{"use strict";t.d(n,{U:()=>q});var r,i=t(57135),a=t.n(i),o=t(41476),u=t(25180),s=t(58640),c=t(73450);!function(e){e.Connected="core.connect.v1.connected",e.PresenceUpdate="presence.v1.UPDATE",e.FriendAdded="friends.v1.FRIEND_ENTRY_ADDED",e.FriendRemoved="friends.v1.FRIEND_ENTRY_REMOVED",e.FriendUpdated="friends.v1.FRIEND_ENTRY_UPDATED",e.FriendInviteAdded="friends.v1.FRIEND_INVITE_ENTRY_ADDED",e.FriendInviteRemoved="friends.v1.FRIEND_INVITE_ENTRY_REMOVED",e.FriendBlocked="friends.v1.BLOCK_LIST_ENTRY_ADDED",e.FriendUnblocked="friends.v1.BLOCK_LIST_ENTRY_REMOVED"}(r||(r={}));var d=t(77843),l=t(51975),f=t(77176),p=t(85985),v=t(66310),h=t(67921),y=t.n(h),m=t(76772);const b=new(function(){function e(){(0,u.Z)(this,e)}var n;return(0,s.Z)(e,[{key:"updateStatus",value:(n=(0,o.Z)(a().mark((function e(n,t){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.m.mutate("\nmutation updateStatus($namespace: String!, $connectionId: String!, $status: String!) {\n    PresenceV2 {\n        updateStatus(namespace: $namespace, connectionId: $connectionId, status: $status) {\n            success\n        }\n    }\n}\n",{namespace:"_",connectionId:t,status:n});case 3:if(null==(r=e.sent)||!r.errors){e.next=9;break}throw o=null===(i=r.errors[0])||void 0===i?void 0:i.serviceResponse,(u=new Error(o)).serviceResponse=JSON.parse(o),u;case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error("Presence update failed",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(e,t){return n.apply(this,arguments)})}]),e}());var g=t(81687),w=t(11719),k=function(){function e(n,t){(0,u.Z)(this,e),(0,c.Z)(this,"deployment",void 0),(0,c.Z)(this,"config",void 0),(0,c.Z)(this,"domain",void 0),(0,c.Z)(this,"presenceUpdatePeriod",void 0),(0,c.Z)(this,"currentConnectionId",void 0),this.deployment=(0,w.v4)(),this.presenceUpdatePeriod=t;var r=n;r.startsWith("wss://")||(r="wss://".concat(n)),this.config={brokerURL:n,connectHeaders:{},webSocketFactory:function(){return new WebSocket(r)},reconnectDelay:6e4,heartbeatIncoming:0,heartbeatOutgoing:3e4},this.domain=n.split(".").slice(-2).join(".")}return(0,s.Z)(e,[{key:"connect",value:function(e,n){var t=new l.RxStomp;t.configure(this.config),y().set("ecma",n,{domain:this.domain,sameSite:"lax"});var r="".concat(this.deployment,"/account/").concat(e.id),i=t.watch(r);this.handleConnectionAnalytics(t),t.activate();var a=i.pipe((0,f.U)(S));return this.handleMessageErrors(a),this.setPresenceOnConnect(a),{messages:a,disconnect:function(){return t.deactivate()}}}},{key:"setPresenceOnConnect",value:function(e){var n=this;e.pipe((0,p.h)((function(e){return e.type===r.Connected})),(0,v.w)((function(e){var t=e.connectionId;return n.currentConnectionId=t,y().remove("ecma",{domain:n.domain,sameSite:"lax"}),b.updateStatus("online",t),(0,d.F)(n.presenceUpdatePeriod).pipe((0,f.U)((function(){return t})))}))).subscribe((function(e){b.updateStatus("online",e)}))}},{key:"handleMessageErrors",value:function(e){var n=this;e.subscribe({error:function(e){y().remove("ecma",{domain:n.domain,sameSite:"lax"}),console.error("Epic connect message error",e),n.sendConnectionErrorAnalytic("message")}})}},{key:"handleConnectionAnalytics",value:function(e){var n=this;e.stompErrors$.subscribe((function(){return n.sendConnectionErrorAnalytic("stomp")})),e.webSocketErrors$.subscribe((function(){return n.sendConnectionErrorAnalytic("websocket")})),e.connectionState$.subscribe((function(e){return n.sendConnectionStateAnalytic(e)}))}},{key:"sendConnectionStateAnalytic",value:function(e){var n={Event:"epic-connect-state-changed",ConnectionId:this.currentConnectionId,State:this.stateDescription(e)};(0,g.sendAnalytic)({code:"eos.social.epic-connect-state-changed",payload:n})}},{key:"stateDescription",value:function(e){switch(e){case l.RxStompState.CLOSED:return"closed";case l.RxStompState.CLOSING:return"closing";case l.RxStompState.CONNECTING:return"connecting";case l.RxStompState.OPEN:return"connected"}}},{key:"sendConnectionErrorAnalytic",value:function(e){var n={Event:"epic-connect-error",ConnectionId:this.currentConnectionId,ErrorType:e};(0,g.sendAnalytic)({code:"eos.social.epic-connect-error",payload:n})}}]),e}();function S(e){return JSON.parse(e.body)}function I(e){switch(e){case"AND":return"android";case"IOS":return"ios";case"PSN":return"psn";case"SWT":return"nintendo";case"WIN":return"windows";case"XBL":return"xbl";case"LNX":case"MAC":case"OTHER":default:return"unknown"}}function x(e){switch(e){case"online":case"away":case"offline":return e;case"xa":return"away";case"dnd":return"offline";default:return"unknown"}}function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var O={online:1,away:2,dnd:3,xa:4};function T(e){return e.map((function(e){return{id:e.id,status:"offline",appId:"",appName:"",joinable:!1,sameSession:!1,platform:"unknown",detailedStatus:""}}))}var F,P=t(69782),Z=t(71507),N=t(71032),E=t(91224),C=t(24535),U=t(32935),j=t(36452),M=t(17786),R=t(35004),D=t(76974),q=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.d;(0,u.Z)(this,e),(0,c.Z)(this,"features",[Z.Nx,P.ut]),(0,c.Z)(this,"connection",null),(0,c.Z)(this,"epicConnect",void 0),(0,c.Z)(this,"sendUpdates",void 0),F||(F=new k(n,t)),this.epicConnect=F,this.sendUpdates=function(e){console.warn("Updates sent before register",e)}}var n,t,i,d,l,f,p,v;return(0,s.Z)(e,[{key:"initialize",value:function(e){return this.sendUpdates=e,Promise.resolve([])}},{key:"handleIntent",value:function(e){switch(e.name){case"connect-presence":return this.connectPresence(e);default:return!1}}},{key:"connectPresence",value:function(e){var n=e.payload.account,t=this.getToken(n);return t&&this.connect(n,t),Promise.resolve([])}},{key:"getToken",value:function(e){var n=e.authToken;return e.elevatedToken||((0,R.W)(n)?n:void 0)}},{key:"getInitialPresence",value:(v=(0,o.Z)(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.Z.getFriends();case 2:return n=e.sent,t=T(n),e.abrupt("return",(0,j.W)("epic-connect-init").collection(Z._O,n).collection(P.ct,t).build());case 5:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"connect",value:(p=(0,o.Z)(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInitialPresence();case 2:r=e.sent,this.sendUpdates(r),null!==this.connection&&this.connection.disconnect(),this.connection=this.epicConnect.connect(n,t),this.handleMessages(this.connection,n);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return p.apply(this,arguments)})},{key:"handleMessages",value:function(e,n){var t=this;e.messages.pipe((0,N.b)((function(e){return t.handleMessage(e,n)})),(0,E.K)((function(e){return console.error("Error processing epic connect message",e),(0,D.of)([])}))).subscribe((function(e){return t.sendUpdates(e)}))}},{key:"handleMessage",value:(f=(0,o.Z)(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("MESSAGE",n),e.t0=n.type,e.next=e.t0===r.PresenceUpdate?4:e.t0===r.FriendAdded?5:e.t0===r.FriendRemoved?6:e.t0===r.FriendUpdated?7:e.t0===r.FriendInviteAdded?8:e.t0===r.FriendInviteRemoved?9:e.t0===r.FriendBlocked?10:e.t0===r.FriendUnblocked?11:12;break;case 4:return e.abrupt("return",this.presenceUpdate(n));case 5:return e.abrupt("return",this.friendAdded(n,t));case 6:return e.abrupt("return",this.friendRemoved(n,t));case 7:return e.abrupt("return",this.friendUpdated(n));case 8:return e.abrupt("return",this.friendInviteAdded(n,t));case 9:return e.abrupt("return",this.friendInviteRemoved(n,t));case 10:return e.abrupt("return",this.friendBlocked(n));case 11:return e.abrupt("return",this.friendUnblocked(n));case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return f.apply(this,arguments)})},{key:"presenceUpdate",value:function(e){var n=function(e){if("offline"===e.status)return{id:e.accountId,status:"offline",appId:"",appName:"",joinable:!1,platform:"unknown",sameSession:!1};var n=e.perNs.filter((function(e){return"_"!==e.ns}));if(n.length>0){var t=function(e){var n=e.activity.value?e.activity.value:void 0;if(e.productId){var t=e;return{appId:t.appId,appName:t.props.EOS_ProductName,detailedStatus:n,joinable:!1,sameSession:!1,platform:I(t.props.EOS_Platform),status:x(t.status)}}var r,i=e;return{appId:i.ns,appName:(null===(r=i.props)||void 0===r?void 0:r.X_NonEOS_ProductName)||"Playing a Game",detailedStatus:n,joinable:!1,sameSession:!1,platform:"unknown",status:x(i.status)}}(n.sort((function(e,n){return O[e.status]-O[n.status]}))[0]);return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({id:e.accountId},t)}var r=e.perNs.find((function(e){return"_"===e.ns}));return r?{id:e.accountId,appId:"_",status:x(r.status),appName:"",joinable:!1,platform:"unknown",sameSession:!1}:{id:e.accountId,status:"offline",appId:"",appName:"",joinable:!1,platform:"unknown",sameSession:!1}}(e.payload);return(0,M.Z)("presence-update").updateItem(P.ct,n).build()}},{key:"getFriendId",value:function(e,n){var t=e.from,r=e.to;return{accountId:n.id==t?r:t,direction:n.id==t?"outgoing":"incoming"}}},{key:"friendAdded",value:(l=(0,o.Z)(a().mark((function e(n,t){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFriendId(n.payload,t),i=r.accountId,e.next=3,U.Z.getFriend(i,"accepted");case 3:return o=e.sent,e.abrupt("return",(0,M.Z)("friend-added").updateItem(Z._O,o).build());case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return l.apply(this,arguments)})},{key:"friendRemoved",value:function(e,n){var t=this.getFriendId(e.payload,n).accountId;return(0,M.Z)("friend-removed").remove(Z._O,t).remove(P.ct,t).build()}},{key:"friendUpdated",value:(d=(0,o.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.payload.friendId,e.next=3,U.Z.getFriend(t,"accepted");case 3:return r=e.sent,e.abrupt("return",(0,M.Z)("friend-updated").updateItem(Z._O,r).build());case 5:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"friendInviteAdded",value:(i=(0,o.Z)(a().mark((function e(n,t){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFriendId(n.payload,t),i=r.accountId,o=r.direction,e.next=3,U.Z.getFriend(i,o);case 3:return u=e.sent,e.abrupt("return",(0,M.Z)("friend-invite-added").add(Z._O,u).build());case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return i.apply(this,arguments)})},{key:"friendInviteRemoved",value:function(e,n){var t=this.getFriendId(e.payload,n).accountId;return(0,M.Z)("friend-invite-removed").remove(Z._O,t).build()}},{key:"friendBlocked",value:(t=(0,o.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.Z.getFriend(n.payload.accountId,"BLOCKED");case 2:return t=e.sent,e.abrupt("return",(0,M.Z)("friend-blocked-updated").updateItem(Z.ok,t).build());case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"friendUnblocked",value:(n=(0,o.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.Z.getFriend(n.payload.accountId,"NOT_FRIEND");case 2:return t=e.sent,e.abrupt("return",(0,M.Z)("friend-unblocked-updated").updateItem(Z.ok,t).build());case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),e}()},16764:(e,n,t)=>{"use strict";t.d(n,{S:()=>y});var r=t(19394),i=t(57135),a=t.n(i),o=t(41476),u=t(25180),s=t(58640),c=t(73450),d=t(97826),l=t(17786),f=t(11719);function p(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var h=function(){function e(n,t){(0,u.Z)(this,e),(0,c.Z)(this,"id",void 0),(0,c.Z)(this,"intent",void 0),(0,c.Z)(this,"sendUpdates",void 0),this.id=(0,f.v4)(),this.intent=n,this.sendUpdates=t}return(0,s.Z)(e,[{key:"processing",value:function(){var e=this.createStatus("processing"),n=(0,l.Z)("add-intent-status").add(d.bo,e).build();return this.sendUpdates(n),e}},{key:"complete",value:function(e){var n=this.createStatus("complete"),t=(0,l.Z)("update-intent-status").updateItem(d.bo,{id:this.id,status:"complete"}).build();return this.sendUpdates(e.concat(t)),n}},{key:"notSent",value:function(){var e={id:this.id,correlationId:this.id,status:"not-sent",intentName:this.intent.name},n=(0,l.Z)("update-intent-status").updateItem(d.bo,{id:this.id,status:"not-sent"}).build();return this.sendUpdates(n),e}},{key:"error",value:function(e,n){var t={id:this.id,correlationId:this.id,status:"error",intentName:this.intent.name,errorCode:n||this.errorCode(),errorMessage:e},r=(0,l.Z)("update-intent-status").updateItem(d.bo,{id:this.id,status:"error",errorCode:n||this.errorCode(),errorMessage:e}).build();return this.sendUpdates(r),t}},{key:"createStatus",value:function(e){return{id:this.id,correlationId:this.id,status:e,intentName:this.intent.name}}},{key:"errorCode",value:function(){var e=this.intent,n=e.feature,t=e.name;return"".concat(n,".").concat(t,".error")}}]),e}(),y=function(){function e(n,t){(0,u.Z)(this,e),(0,c.Z)(this,"platforms",void 0),(0,c.Z)(this,"sendUpdates",void 0),(0,c.Z)(this,"registered",void 0),(0,c.Z)(this,"info",void 0),this.platforms=n,this.registered=!1,this.info=t,this.sendUpdates=function(){}}var n,t,i,d;return(0,s.Z)(e,[{key:"addFeature",value:(d=(0,o.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.platforms.push(n),!this.registered||!n.initialize){e.next=6;break}return e.next=4,n.initialize(this.sendUpdates);case 4:t=e.sent,this.sendUpdates(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"removeFeature",value:function(e){this.platforms=this.platforms.filter((function(n){return n===e}))}},{key:"platformFeatures",value:function(){return this.platforms.reduce((function(e,n){return e.concat(n.features)}),[])}},{key:"getFeatures",value:function(){return Promise.resolve(this.platformFeatures())}},{key:"getInfo",value:function(){return Promise.resolve(this.info)}},{key:"sendIntent",value:(i=(0,o.Z)(a().mark((function e(n){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new h(n,this.sendUpdates),r=t.processing(),!1!==(i=this.forwardIntentToPlatform(n))){e.next=7;break}return e.abrupt("return",Promise.resolve(t.notSent()));case 7:return this.updateWhenComplete(t,i),e.abrupt("return",Promise.resolve(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"forwardIntentToPlatform",value:function(e){var n,t=p(this.platforms.filter((function(n){return n.features.includes(e.feature)})));try{for(t.s();!(n=t.n()).done;){var r=n.value.handleIntent(e);if(!1!==r)return r}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"register",value:(t=(0,o.Z)(a().mark((function e(n){var t,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sendUpdates=n,t=[],i=p(this.platforms),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=20;break}if(!(u=o.value).initialize){e.next=18;break}return e.prev=8,e.next=11,u.initialize(this.sendUpdates);case 11:s=e.sent,t.push.apply(t,(0,r.Z)(s)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("Failed to initialize platform ".concat(u),e.t0);case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(3),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return this.registered=!0,e.abrupt("return",t);case 30:case"end":return e.stop()}}),e,this,[[3,22,25,28],[8,15]])}))),function(e){return t.apply(this,arguments)})},{key:"updateWhenComplete",value:(n=(0,o.Z)(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:r=e.sent,n.complete(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=e.t0.errorMessage||e.t0.message,n.error(i,e.t0.errorCode);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return n.apply(this,arguments)})}]),e}()},85496:(e,n,t)=>{"use strict";t.d(n,{B:()=>o,l:()=>s});var r=t(57135),i=t.n(r),a=t(41476);function o(e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().sendintent({feature:n.feature,name:n.name,payload:JSON.stringify(n.payload)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return window.ue.social}},69782:(e,n,t)=>{"use strict";t.d(n,{ut:()=>i,qc:()=>a,ct:()=>o,gV:()=>u,oo:()=>s});var r=t(25926),i="presence",a="last-online",o=(0,r.Rl)(i,"presences",[]),u={id:"presence-index",defaultValue:{}},s=(0,r.Rl)(a,"last-online",{})},17786:(e,n,t)=>{"use strict";t.d(n,{Z:()=>u});var r=t(25180),i=t(58640),a=t(73450),o=function(){function e(n,t){(0,r.Z)(this,e),(0,a.Z)(this,"reason",void 0),(0,a.Z)(this,"version",void 0),(0,a.Z)(this,"collectionUpdates",[]),(0,a.Z)(this,"stateUpdates",[]),this.reason=n,this.version=t}return(0,i.Z)(e,[{key:"add",value:function(e,n,t){var r=this.getCollectionUpdate(e,t);return r.add?r.add.push(n):r.add=[n],this}},{key:"updateItem",value:function(e,n,t){var r=this.getCollectionUpdate(e,t);return r.update?r.update.push(n):r.update=[n],this}},{key:"remove",value:function(e,n,t){var r=this.getCollectionUpdate(e,t);return r.remove?r.remove.push(n):r.remove=[n],this}},{key:"set",value:function(e,n){return this.update(e,n)}},{key:"update",value:function(e,n){return this.getStateUpdate(e).state=n,this}},{key:"build",value:function(){return this.stateUpdates.concat(this.collectionUpdates)}},{key:"getStateUpdate",value:function(e){return this.stateUpdates.find((function(n){var t=n.feature,r=n.name;return t===e.feature&&r===e.name}))||this.createStateUpdate(e)}},{key:"createStateUpdate",value:function(e){var n={feature:e.feature,name:e.name,collection:!1,reason:this.reason,version:this.version};return this.stateUpdates.push(n),n}},{key:"getCollectionUpdate",value:function(e,n){return this.collectionUpdates.find((function(n){var t=n.feature,r=n.name;return t===e.feature&&r===e.name}))||this.createCollectionUpdate(e,n)}},{key:"createCollectionUpdate",value:function(e,n){var t={feature:e.feature,name:e.name,collection:!0,keyName:n||"id",reason:this.reason,version:this.version};return this.collectionUpdates.push(t),t}}]),e}();function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"internal-1.0.0";return new o(e,n)}},3764:(e,n,t)=>{"use strict";var r,i;t.d(n,{V:()=>r,a:()=>i}),function(e){e.Shortcut="Shortcut",e.Click="Click",e.TopTab="TopTab",e.Friends="Friends",e.Requests="Requests"}(r||(r={})),function(e){e.Online="Online",e.Away="Away",e.Offline="Offline"}(i||(i={}))},28847:(e,n,t)=>{"use strict";var r,i;t.d(n,{S:()=>r,s:()=>i}),function(e){e.Friends="Friends",e.Requests="Requests"}(r||(r={})),function(e){e.AcceptRequest="AcceptRequest",e.SendRequest="SendRequest",e.IgnoreRequest="IgnoreRequest",e.CancelRequest="CancelRequest",e.Unfriend="Unfriend",e.Block="Block",e.Unblock="Unblock"}(i||(i={}))},31217:(e,n,t)=>{"use strict";var r,i;t.d(n,{P:()=>r,H:()=>i}),function(e){e.Game="Game",e.Party="Party"}(r||(r={})),function(e){e.Accept="Accept",e.Dismiss="Dismiss",e.Send="Send",e.Receive="Receive",e.Join="Join"}(i||(i={}))},34569:(e,n,t)=>{"use strict";t.d(n,{CommonMethod:()=>i.V,UserState:()=>i.a,FriendshipActionType:()=>a.s,SearchType:()=>a.S,InviteActionType:()=>o.H,InviteType:()=>o.P,ScreenName:()=>u.C});var r=t(65495);t.o(r,"CommonMethod")&&t.d(n,{CommonMethod:function(){return r.CommonMethod}}),t.o(r,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return r.FriendshipActionType}}),t.o(r,"InviteActionType")&&t.d(n,{InviteActionType:function(){return r.InviteActionType}}),t.o(r,"InviteType")&&t.d(n,{InviteType:function(){return r.InviteType}}),t.o(r,"ScreenName")&&t.d(n,{ScreenName:function(){return r.ScreenName}}),t.o(r,"SearchType")&&t.d(n,{SearchType:function(){return r.SearchType}}),t.o(r,"UserState")&&t.d(n,{UserState:function(){return r.UserState}});var i=t(3764),a=(t(93161),t(28847)),o=t(31217),u=t(59046)},70889:(e,n,t)=>{"use strict";var r;t.d(n,{X:()=>r}),function(e){e.All="all",e.FriendsOfFriends="friends_of_friends",e.None="none",e.Public="public",e.Private="private"}(r||(r={}))},14754:(e,n,t)=>{"use strict";t.d(n,{z:()=>r.z,X:()=>i.X});var r=t(17059),i=t(70889),a=t(64518);t.o(a,"CommonMethod")&&t.d(n,{CommonMethod:function(){return a.CommonMethod}}),t.o(a,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return a.FriendshipActionType}}),t.o(a,"InviteActionType")&&t.d(n,{InviteActionType:function(){return a.InviteActionType}}),t.o(a,"InviteType")&&t.d(n,{InviteType:function(){return a.InviteType}}),t.o(a,"ScreenName")&&t.d(n,{ScreenName:function(){return a.ScreenName}}),t.o(a,"SearchType")&&t.d(n,{SearchType:function(){return a.SearchType}}),t.o(a,"UserState")&&t.d(n,{UserState:function(){return a.UserState}});var o=t(429);t.o(o,"CommonMethod")&&t.d(n,{CommonMethod:function(){return o.CommonMethod}}),t.o(o,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return o.FriendshipActionType}}),t.o(o,"InviteActionType")&&t.d(n,{InviteActionType:function(){return o.InviteActionType}}),t.o(o,"InviteType")&&t.d(n,{InviteType:function(){return o.InviteType}}),t.o(o,"ScreenName")&&t.d(n,{ScreenName:function(){return o.ScreenName}}),t.o(o,"SearchType")&&t.d(n,{SearchType:function(){return o.SearchType}}),t.o(o,"UserState")&&t.d(n,{UserState:function(){return o.UserState}});var u=t(18991);t.o(u,"CommonMethod")&&t.d(n,{CommonMethod:function(){return u.CommonMethod}}),t.o(u,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return u.FriendshipActionType}}),t.o(u,"InviteActionType")&&t.d(n,{InviteActionType:function(){return u.InviteActionType}}),t.o(u,"InviteType")&&t.d(n,{InviteType:function(){return u.InviteType}}),t.o(u,"ScreenName")&&t.d(n,{ScreenName:function(){return u.ScreenName}}),t.o(u,"SearchType")&&t.d(n,{SearchType:function(){return u.SearchType}}),t.o(u,"UserState")&&t.d(n,{UserState:function(){return u.UserState}});var s=t(6332);t.o(s,"CommonMethod")&&t.d(n,{CommonMethod:function(){return s.CommonMethod}}),t.o(s,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return s.FriendshipActionType}}),t.o(s,"InviteActionType")&&t.d(n,{InviteActionType:function(){return s.InviteActionType}}),t.o(s,"InviteType")&&t.d(n,{InviteType:function(){return s.InviteType}}),t.o(s,"ScreenName")&&t.d(n,{ScreenName:function(){return s.ScreenName}}),t.o(s,"SearchType")&&t.d(n,{SearchType:function(){return s.SearchType}}),t.o(s,"UserState")&&t.d(n,{UserState:function(){return s.UserState}});var c=t(66345);t.o(c,"CommonMethod")&&t.d(n,{CommonMethod:function(){return c.CommonMethod}}),t.o(c,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return c.FriendshipActionType}}),t.o(c,"InviteActionType")&&t.d(n,{InviteActionType:function(){return c.InviteActionType}}),t.o(c,"InviteType")&&t.d(n,{InviteType:function(){return c.InviteType}}),t.o(c,"ScreenName")&&t.d(n,{ScreenName:function(){return c.ScreenName}}),t.o(c,"SearchType")&&t.d(n,{SearchType:function(){return c.SearchType}}),t.o(c,"UserState")&&t.d(n,{UserState:function(){return c.UserState}});var d=t(47422);t.o(d,"CommonMethod")&&t.d(n,{CommonMethod:function(){return d.CommonMethod}}),t.o(d,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return d.FriendshipActionType}}),t.o(d,"InviteActionType")&&t.d(n,{InviteActionType:function(){return d.InviteActionType}}),t.o(d,"InviteType")&&t.d(n,{InviteType:function(){return d.InviteType}}),t.o(d,"ScreenName")&&t.d(n,{ScreenName:function(){return d.ScreenName}}),t.o(d,"SearchType")&&t.d(n,{SearchType:function(){return d.SearchType}}),t.o(d,"UserState")&&t.d(n,{UserState:function(){return d.UserState}});var l=t(34569);t.o(l,"CommonMethod")&&t.d(n,{CommonMethod:function(){return l.CommonMethod}}),t.o(l,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return l.FriendshipActionType}}),t.o(l,"InviteActionType")&&t.d(n,{InviteActionType:function(){return l.InviteActionType}}),t.o(l,"InviteType")&&t.d(n,{InviteType:function(){return l.InviteType}}),t.o(l,"ScreenName")&&t.d(n,{ScreenName:function(){return l.ScreenName}}),t.o(l,"SearchType")&&t.d(n,{SearchType:function(){return l.SearchType}}),t.o(l,"UserState")&&t.d(n,{UserState:function(){return l.UserState}});var f=t(47627);t.o(f,"CommonMethod")&&t.d(n,{CommonMethod:function(){return f.CommonMethod}}),t.o(f,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return f.FriendshipActionType}}),t.o(f,"InviteActionType")&&t.d(n,{InviteActionType:function(){return f.InviteActionType}}),t.o(f,"InviteType")&&t.d(n,{InviteType:function(){return f.InviteType}}),t.o(f,"ScreenName")&&t.d(n,{ScreenName:function(){return f.ScreenName}}),t.o(f,"SearchType")&&t.d(n,{SearchType:function(){return f.SearchType}}),t.o(f,"UserState")&&t.d(n,{UserState:function(){return f.UserState}});var p=t(60598);t.o(p,"CommonMethod")&&t.d(n,{CommonMethod:function(){return p.CommonMethod}}),t.o(p,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return p.FriendshipActionType}}),t.o(p,"InviteActionType")&&t.d(n,{InviteActionType:function(){return p.InviteActionType}}),t.o(p,"InviteType")&&t.d(n,{InviteType:function(){return p.InviteType}}),t.o(p,"ScreenName")&&t.d(n,{ScreenName:function(){return p.ScreenName}}),t.o(p,"SearchType")&&t.d(n,{SearchType:function(){return p.SearchType}}),t.o(p,"UserState")&&t.d(n,{UserState:function(){return p.UserState}});var v=t(84086);t.o(v,"CommonMethod")&&t.d(n,{CommonMethod:function(){return v.CommonMethod}}),t.o(v,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return v.FriendshipActionType}}),t.o(v,"InviteActionType")&&t.d(n,{InviteActionType:function(){return v.InviteActionType}}),t.o(v,"InviteType")&&t.d(n,{InviteType:function(){return v.InviteType}}),t.o(v,"ScreenName")&&t.d(n,{ScreenName:function(){return v.ScreenName}}),t.o(v,"SearchType")&&t.d(n,{SearchType:function(){return v.SearchType}}),t.o(v,"UserState")&&t.d(n,{UserState:function(){return v.UserState}});var h=t(64411);t.o(h,"CommonMethod")&&t.d(n,{CommonMethod:function(){return h.CommonMethod}}),t.o(h,"FriendshipActionType")&&t.d(n,{FriendshipActionType:function(){return h.FriendshipActionType}}),t.o(h,"InviteActionType")&&t.d(n,{InviteActionType:function(){return h.InviteActionType}}),t.o(h,"InviteType")&&t.d(n,{InviteType:function(){return h.InviteType}}),t.o(h,"ScreenName")&&t.d(n,{ScreenName:function(){return h.ScreenName}}),t.o(h,"SearchType")&&t.d(n,{SearchType:function(){return h.SearchType}}),t.o(h,"UserState")&&t.d(n,{UserState:function(){return h.UserState}})}}]);