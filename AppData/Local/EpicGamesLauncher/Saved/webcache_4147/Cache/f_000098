(self.webpackChunk_epic_social_social_modules=self.webpackChunk_epic_social_social_modules||[]).push([[819],{93791:(e,t,n)=>{"use strict";var r;function i(e){r=e}function a(e){r?r(e):console.warn("No analytic handler set")}n.d(t,{K:()=>i,c:()=>a})},65664:(e,t,n)=>{"use strict";n.d(t,{oc:()=>s.Z,bd:()=>c,pf:()=>b,QT:()=>d.Z,Hk:()=>l.Z});var r=n(2055),i=n(45293),a=n.n(i),o=n(57160),u=a().createElement;function c(e){var t=e.locale,n=e.supportedLocales,i=e.defaultLocale,c=e.overrides,s=e.children,l=(0,o.uA)({locale:t,defaultLocale:i,supported:n,overrides:c}),d=b(l);return a().useEffect((function(){document.documentElement.lang=l}),[l]),u(r.Z.Provider,{value:d},s)}var s=n(72040),l=n(74272),d=n(2485),p=n(88742),f=n.n(p),v=n(40505),h=n(50573),y=n(39544),m="en-US";function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=(0,y.Z)(),n=(0,i.useState)(h),r=n[0],a=n[1];return(0,i.useEffect)((function(){function n(){return(n=(0,v.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.MP)(t);case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch localization for ".concat(t),e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t&&e===m||function(e){n.apply(this,arguments)}(e)}),[t,e]),r}n(86912)},67393:(e,t,n)=>{"use strict";function r(e){var t=e.locale,n=e.defaultLocale,r=e.supported,i=e.overrides,a=void 0===i?{}:i;if(r.includes(t))return t;if(t in a)return a[t];var o=t.substr(0,2);return r.includes(o)?o:o in a?a[o]:n}n.d(t,{u:()=>r})},57160:(e,t,n)=>{"use strict";n.d(t,{$G:()=>r.$,az:()=>i.a,uA:()=>d.u,MP:()=>c,dn:()=>l.d});var r=n(35506),i=n(24479),a=n(88742),o=n.n(a),u=n(40505);function c(e){return s.apply(this,arguments)}function s(){return(s=(0,u.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(98784)("./messages-overlay_".concat(t,".json"));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=n(51571),d=n(67393)},13782:(e,t,n)=>{"use strict";n.d(t,{Qb:()=>a,r9:()=>o,fA:()=>u});var r=n(92733),i=n(85437),a=(0,i.Rl)(r.k,"account-info",{id:"",displayName:"",platform:"unknown",authToken:""}),o=(0,i.Rl)(r.N,"friends-external-auths",[]),u=(0,i.Rl)(r.k,"token-exchange-code")},77026:(e,t,n)=>{"use strict";n.d(t,{Hb:()=>i,Gy:()=>a,Xn:()=>o,KJ:()=>u});var r=n(85437),i="achievements",a="egs-achievements",o=(0,r.Rl)(i,"achievements",[]),u=(0,r.Rl)(a,"egs-achievements",{})},79143:(e,t,n)=>{"use strict";n.d(t,{gn:()=>i,my:()=>a,sc:()=>o,bo:()=>u,rO:()=>c,Gx:()=>s,TL:()=>l,XM:()=>d,YP:()=>p,$x:()=>f,Pz:()=>v,ob:()=>h,$4:()=>y,ch:()=>m});var r=n(85437),i="application",a=(0,r.Rl)(i,"app-info",{locale:"en-US",visible:!0,displayPreference:"topRight",launchPlatform:"unknown"}),o=((0,r.Rl)("platform-requests","pending-platform-requests",[]),(0,r.Rl)(i,"hotkey-info",{name:["Shift","F3"],pressed:!1})),u=(0,r.Rl)(i,"intent-status",[]),c=((0,r.Rl)(i,"last-error"),{id:"notification-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}}),s={id:"window-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}},l={id:"current-hitbox",defaultValue:{top:0,bottom:0,left:0,right:0}},d={id:"app-panel-visible",defaultValue:"exited"},p={id:"current-display-settings",defaultValue:{visible:!1,exclusiveInput:!1,hitBox:{top:0,bottom:0,left:0,right:0}}},f="app-open-request",v="intent-started",h="intent-error",y="intent-success",m="intent-finished"},16859:(e,t,n)=>{"use strict";n.d(t,{Nx:()=>i,RK:()=>a,_O:()=>o,l3:()=>u,ok:()=>c});var r=n(85437),i="friends",a="friends-management",o=(0,r.Rl)(i,"friends",[]),u={id:"friends-index",defaultValue:{}},c=(0,r.Rl)(a,"friends-search-results",[])},85543:(e,t,n)=>{"use strict";n.d(t,{a3:()=>o,PW:()=>u,ZD:()=>c});var r=n(48145),i=n(223),a=n(61798),o=function(e){return e.get(r.v).filter((function(t){var n=e.get((0,a.N)(t.id));return"online"===(null==n?void 0:n.status)}))},u=function(e){var t=e.get(o),n=e.get(i.H);return t.filter((function(t){var r=e.get((0,a.N)(t.id));return(null==r?void 0:r.appId)!==n}))},c=function(e){return e.get(r.v).filter((function(t){var n=e.get((0,a.N)(t.id));if(!n)return!0;switch(n.status){case"away":case"extendedAway":case"offline":return!0;default:return!1}}))}},85437:(e,t,n)=>{"use strict";n.d(t,{p0:()=>r,AN:()=>i,bX:()=>a,J:()=>o,Rl:()=>u});var r={id:"feature-platform"},i={id:"features",defaultValue:[]},a={id:"platform-info"},o={id:"platform-metadata"};function u(e,t,n){return{id:"".concat(e,"-").concat(t),feature:e,name:t,defaultValue:n}}},80194:(e,t,n)=>{"use strict";n.d(t,{ut:()=>i,qc:()=>a,ct:()=>o,gV:()=>u,oo:()=>c});var r=n(85437),i="presence",a="last-online",o=(0,r.Rl)(i,"presences",[]),u={id:"presence-index",defaultValue:{}},c=(0,r.Rl)(a,"last-online",{})},82978:(e,t,n)=>{"use strict";var r,i;n.d(t,{V:()=>r,a:()=>i}),function(e){e.Click="Click",e.Friends="Friends",e.Requests="Requests",e.Shortcut="Shortcut",e.TopTab="TopTab"}(r||(r={})),function(e){e.Away="Away",e.Offline="Offline",e.Online="Online"}(i||(i={}))},54561:(e,t,n)=>{"use strict";n.d(t,{CommonMethod:()=>u.V,FriendshipActionType:()=>i,InviteActionType:()=>o,InviteType:()=>a,ScreenName:()=>c.C,SearchType:()=>r,UserState:()=>u.a}),n(22785);var r,i,a,o,u=n(82978);n(40682),function(e){e.Friends="Friends",e.Requests="Requests"}(r||(r={})),function(e){e.AcceptRequest="AcceptRequest",e.Block="Block",e.CancelRequest="CancelRequest",e.IgnoreRequest="IgnoreRequest",e.SendRequest="SendRequest",e.Unblock="Unblock",e.Unfriend="Unfriend"}(i||(i={})),function(e){e.Game="Game",e.Party="Party"}(a||(a={})),function(e){e.Accept="Accept",e.Dismiss="Dismiss",e.Join="Join",e.Receive="Receive",e.Send="Send"}(o||(o={}));var c=n(17420)},85285:(e,t,n)=>{"use strict";var r;n.d(t,{X:()=>r}),function(e){e.All="all",e.FriendsOfFriends="friends_of_friends",e.None="none",e.Private="private",e.Public="public"}(r||(r={}))},28874:(e,t,n)=>{"use strict";n.d(t,{z:()=>r.z,X:()=>i.X,CommonMethod:()=>d.CommonMethod,FriendshipActionType:()=>d.FriendshipActionType,InviteActionType:()=>d.InviteActionType,InviteType:()=>d.InviteType,ScreenName:()=>d.ScreenName,SearchType:()=>d.SearchType,UserState:()=>d.UserState});var r=n(23441),i=n(85285),a=n(8264);n.o(a,"CommonMethod")&&n.d(t,{CommonMethod:function(){return a.CommonMethod}}),n.o(a,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return a.FriendshipActionType}}),n.o(a,"InviteActionType")&&n.d(t,{InviteActionType:function(){return a.InviteActionType}}),n.o(a,"InviteType")&&n.d(t,{InviteType:function(){return a.InviteType}}),n.o(a,"ScreenName")&&n.d(t,{ScreenName:function(){return a.ScreenName}}),n.o(a,"SearchType")&&n.d(t,{SearchType:function(){return a.SearchType}}),n.o(a,"UserState")&&n.d(t,{UserState:function(){return a.UserState}});var o=n(99760);n.o(o,"CommonMethod")&&n.d(t,{CommonMethod:function(){return o.CommonMethod}}),n.o(o,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return o.FriendshipActionType}}),n.o(o,"InviteActionType")&&n.d(t,{InviteActionType:function(){return o.InviteActionType}}),n.o(o,"InviteType")&&n.d(t,{InviteType:function(){return o.InviteType}}),n.o(o,"ScreenName")&&n.d(t,{ScreenName:function(){return o.ScreenName}}),n.o(o,"SearchType")&&n.d(t,{SearchType:function(){return o.SearchType}}),n.o(o,"UserState")&&n.d(t,{UserState:function(){return o.UserState}});var u=n(33692);n.o(u,"CommonMethod")&&n.d(t,{CommonMethod:function(){return u.CommonMethod}}),n.o(u,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return u.FriendshipActionType}}),n.o(u,"InviteActionType")&&n.d(t,{InviteActionType:function(){return u.InviteActionType}}),n.o(u,"InviteType")&&n.d(t,{InviteType:function(){return u.InviteType}}),n.o(u,"ScreenName")&&n.d(t,{ScreenName:function(){return u.ScreenName}}),n.o(u,"SearchType")&&n.d(t,{SearchType:function(){return u.SearchType}}),n.o(u,"UserState")&&n.d(t,{UserState:function(){return u.UserState}});var c=n(33685);n.o(c,"CommonMethod")&&n.d(t,{CommonMethod:function(){return c.CommonMethod}}),n.o(c,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return c.FriendshipActionType}}),n.o(c,"InviteActionType")&&n.d(t,{InviteActionType:function(){return c.InviteActionType}}),n.o(c,"InviteType")&&n.d(t,{InviteType:function(){return c.InviteType}}),n.o(c,"ScreenName")&&n.d(t,{ScreenName:function(){return c.ScreenName}}),n.o(c,"SearchType")&&n.d(t,{SearchType:function(){return c.SearchType}}),n.o(c,"UserState")&&n.d(t,{UserState:function(){return c.UserState}});var s=n(94965);n.o(s,"CommonMethod")&&n.d(t,{CommonMethod:function(){return s.CommonMethod}}),n.o(s,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return s.FriendshipActionType}}),n.o(s,"InviteActionType")&&n.d(t,{InviteActionType:function(){return s.InviteActionType}}),n.o(s,"InviteType")&&n.d(t,{InviteType:function(){return s.InviteType}}),n.o(s,"ScreenName")&&n.d(t,{ScreenName:function(){return s.ScreenName}}),n.o(s,"SearchType")&&n.d(t,{SearchType:function(){return s.SearchType}}),n.o(s,"UserState")&&n.d(t,{UserState:function(){return s.UserState}});var l=n(95632);n.o(l,"CommonMethod")&&n.d(t,{CommonMethod:function(){return l.CommonMethod}}),n.o(l,"FriendshipActionType")&&n.d(t,{FriendshipActionType:function(){return l.FriendshipActionType}}),n.o(l,"InviteActionType")&&n.d(t,{InviteActionType:function(){return l.InviteActionType}}),n.o(l,"InviteType")&&n.d(t,{InviteType:function(){return l.InviteType}}),n.o(l,"ScreenName")&&n.d(t,{ScreenName:function(){return l.ScreenName}}),n.o(l,"SearchType")&&n.d(t,{SearchType:function(){return l.SearchType}}),n.o(l,"UserState")&&n.d(t,{UserState:function(){return l.UserState}});var d=n(54561)},36819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ji});var r,i=n(45293),a=n.n(i),o=n(83101),u=n(60304),c=n(39183),s=n(3184),l=n(88742),d=n.n(l),p=n(40505),f=n(76982),v=n(67105);!function(e){e.Connected="core.connect.v1.connected",e.FriendAdded="friends.v1.FRIEND_ENTRY_ADDED",e.FriendBlocked="friends.v1.BLOCK_LIST_ENTRY_ADDED",e.FriendInviteAdded="friends.v1.FRIEND_INVITE_ENTRY_ADDED",e.FriendInviteRemoved="friends.v1.FRIEND_INVITE_ENTRY_REMOVED",e.FriendRemoved="friends.v1.FRIEND_ENTRY_REMOVED",e.FriendUnblocked="friends.v1.BLOCK_LIST_ENTRY_REMOVED",e.FriendUpdated="friends.v1.FRIEND_ENTRY_UPDATED",e.PresenceUpdate="presence.v1.UPDATE"}(r||(r={}));var h=n(77843),y=n(51975),m=n(77176),b=n(85985),g=n(66310),k=n(67921),w=n.n(k),x=n(58720),O=n(63438),I=n(48318),S=n(70184),T=n(88032),Z=n(42596),P=n(82841),A=n(37189);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=(0,P.q)((function(e){var t=e.graphQLErrors;t&&t&&(t.map((function(e){var t=e.message;return console.error("message: ".concat(t))})),console.error(t))}));var F=n(93508),C=n(23063),R=n(32952),U=n(1348),D=n.n(U);function M(){var e=(0,x.Z)(["\n                ","\n            "]);return M=function(){return e},e}function _(){var e=(0,x.Z)(["\n                ","\n            "]);return _=function(){return e},e}var q=function(e){var t=e.authToken;return e.initialized&&t.length>0},z=new(function(){function e(){var t=this;(0,o.Z)(this,e),(0,v.Z)(this,"endpoint",void 0),(0,v.Z)(this,"client",void 0),(0,v.Z)(this,"state",{authToken:"",initialized:!1}),(0,v.Z)(this,"stateChange",new R.xQ),(0,v.Z)(this,"initialize",(function(e){var n,r,i,a,o,u,c,s,l=(n=e,r=t.getAuthToken,i="include",a=function(e,t){var n=function(e){var t={Authorization:"","X-EPIC-CORRELATION-ID":""};try{e&&""!==e&&(t.Authorization="Bearer ".concat(e)),t["X-EPIC-CORRELATION-ID"]=(0,A.Z)()}catch(e){console.log("Failed to get token from sdk")}return t}(r().authToken);return t.referrerPolicy="no-referrer-when-downgrade",t.headers=N(N({},t.headers),n),(0,Z.Z)(e,t)},o=new I.A({uri:n,batchMax:10,batchInterval:15,credentials:i,fetch:a}),u=new S.u({uri:n,credentials:i,fetch:a}),c=j.split((function(e){return 1===e.getContext().version}),o,u),s=new O.fe({cache:new T.h4,link:c,name:"overlay",version:"1.0",queryDeduplication:!1,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{errorPolicy:"all"}}}),function(){return s});t.client=l(),t.endpoint=e,t.state.initialized=!0,t.stateChange.next(t.state)})),(0,v.Z)(this,"getAuthToken",(function(){return{authToken:t.state.authToken}})),(0,v.Z)(this,"setAuthToken",(function(e){t.state.authToken=e,t.stateChange.next(t.state)})),(0,v.Z)(this,"waitForInit",(0,p.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stateChange.pipe((0,F.O)(t.state),(0,b.h)(q),(0,C.q)(1)).toPromise();case 2:return e.abrupt("return",t.client);case 3:case"end":return e.stop()}}),e)}))))}var t,n;return(0,f.Z)(e,[{key:"query",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.waitForInit();case 4:return i=e.sent,e.abrupt("return",i.query({query:D()(_(),t),variables:n,context:{options:r}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"mutate",value:(t=(0,p.Z)(d().mark((function e(t){var n,r,i,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.waitForInit();case 4:return i=e.sent,e.abrupt("return",i.mutate({mutation:D()(M(),t),variables:n,context:{options:r}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}());const $=new(function(){function e(){(0,o.Z)(this,e)}var t;return(0,f.Z)(e,[{key:"updateStatus",value:(t=(0,p.Z)(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.mutate("\nmutation updateStatus($namespace: String!, $connectionId: String!, $status: String!) {\n    PresenceV2 {\n        updateStatus(namespace: $namespace, connectionId: $connectionId, status: $status) {\n            success\n        }\n    }\n}\n",{namespace:"_",connectionId:n,status:t});case 3:if(null==(r=e.sent)||!r.errors){e.next=9;break}throw a=null===(i=r.errors[0])||void 0===i?void 0:i.serviceResponse,(o=new Error(a)).serviceResponse=JSON.parse(a),o;case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error("Presence update failed",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(e,n){return t.apply(this,arguments)})}]),e}());var L=n(93791),X=n(11719),B=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"deployment",void 0),(0,v.Z)(this,"config",void 0),(0,v.Z)(this,"domain",void 0),(0,v.Z)(this,"presenceUpdatePeriod",void 0),(0,v.Z)(this,"currentConnectionId",void 0),this.deployment=(0,X.v4)(),this.presenceUpdatePeriod=n;var r=t;r.startsWith("wss://")||(r="wss://".concat(t)),this.config={brokerURL:t,connectHeaders:{},webSocketFactory:function(){return new WebSocket(r)},reconnectDelay:6e4,heartbeatIncoming:0,heartbeatOutgoing:3e4},this.domain=t.split(".").slice(-2).join(".")}return(0,f.Z)(e,[{key:"connect",value:function(e,t){var n=new y.RxStomp;n.configure(this.config),w().set("ecma",t,{domain:this.domain,sameSite:"lax"});var r="".concat(this.deployment,"/account/").concat(e.id),i=n.watch(r);this.handleConnectionAnalytics(n),n.activate();var a=i.pipe((0,m.U)(V));return this.handleMessageErrors(a),this.setPresenceOnConnect(a),{messages:a,disconnect:function(){return n.deactivate()}}}},{key:"setPresenceOnConnect",value:function(e){var t=this;e.pipe((0,b.h)((function(e){return e.type===r.Connected})),(0,g.w)((function(e){var n=e.connectionId;return t.currentConnectionId=n,$.updateStatus("online",n),(0,h.F)(t.presenceUpdatePeriod).pipe((0,m.U)((function(){return n})))}))).subscribe((function(e){$.updateStatus("online",e)}))}},{key:"handleMessageErrors",value:function(e){var t=this;e.subscribe({error:function(e){console.error("Epic connect message error",e),t.sendConnectionErrorAnalytic("message")}})}},{key:"handleConnectionAnalytics",value:function(e){var t=this;e.stompErrors$.subscribe((function(){return t.sendConnectionErrorAnalytic("stomp")})),e.webSocketErrors$.subscribe((function(){return t.sendConnectionErrorAnalytic("websocket")})),e.connectionState$.subscribe((function(e){return t.sendConnectionStateAnalytic(e)}))}},{key:"sendConnectionStateAnalytic",value:function(e){var t={Event:"epic-connect-state-changed",ConnectionId:this.currentConnectionId,State:this.stateDescription(e)};(0,L.c)({code:"eos.social.epic-connect-state-changed",payload:t})}},{key:"stateDescription",value:function(e){switch(e){case y.RxStompState.CLOSED:return"closed";case y.RxStompState.CLOSING:return"closing";case y.RxStompState.CONNECTING:return"connecting";case y.RxStompState.OPEN:return"connected"}}},{key:"sendConnectionErrorAnalytic",value:function(e){var t={Event:"epic-connect-error",ConnectionId:this.currentConnectionId,ErrorType:e};(0,L.c)({code:"eos.social.epic-connect-error",payload:t})}}]),e}();function V(e){return JSON.parse(e.body)}function G(e){switch(e){case"AND":return"android";case"IOS":return"ios";case"PSN":return"psn";case"SWT":return"nintendo";case"WIN":return"windows";case"XBL":return"xbl";case"LNX":case"MAC":case"OTHER":default:return"unknown"}}function H(e){switch(e){case"online":case"away":case"offline":return e;case"xa":return"away";case"dnd":return"offline";default:return"unknown"}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K={online:1,away:2,dnd:3,xa:4};var W=n(80194);function Q(e){return e.map((function(e){return{id:e.id,status:"offline",appId:"",appName:"",joinable:!1,sameSession:!1,platform:"unknown",detailedStatus:""}}))}var Y=n(16859),ee=n(71032),te=n(91224),ne=12e5,re=n(86420),ie=n(28874);function ae(e){return e.filter((function(e){return!!e.id}))}function oe(e){return e?e.map((function(e){return{type:e.type,displayName:e.externalDisplayName}})):[]}function ue(e,t){return e?e.filter((function(e){return!(null==e||!e.account)&&(null==e?void 0:e.account.length)>0})).map((function(e){var n,r,i,a,o,u,c,s,l,d;return{id:null==e||null===(n=e.account)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.id,displayName:(null==e||null===(i=e.account)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.displayName)||(null==e||null===(o=e.account)||void 0===o||null===(u=o[0])||void 0===u||null===(c=u.externalAuths)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.externalDisplayName),type:t,externalAuths:oe(null==e||null===(l=e.account)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.externalAuths)}})):[]}const ce=new(function(){function e(){(0,o.Z)(this,e)}var t,n,r,i,a,u,c,s;return(0,f.Z)(e,[{key:"addFriend",value:(s=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutate("\n    mutation inviteFriendRequest($friendId: String!) {\n        Friends {\n            invite(friendToInvite: $friendId) {\n                success\n            }\n        }\n    }\n",{friendId:t});case 2:if(o=e.sent,u=null!==(n=null===(r=o.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(a=i.invite)||void 0===a?void 0:a.success)&&void 0!==n&&n,null==o||!o.errors){e.next=9;break}throw s=null===(c=o.errors[0])||void 0===c?void 0:c.serviceResponse,(l=new Error(s)).serviceResponse=JSON.parse(s),l;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"blockFriend",value:(c=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutate("\nmutation block($friendToBlock: String!) {\n  Friends {\n    block(friendToBlock: $friendToBlock) {\n      success\n    }\n  }\n}\n",{friendToBlock:t});case 2:if(o=e.sent,u=null!==(n=null===(r=o.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(a=i.block)||void 0===a?void 0:a.success)&&void 0!==n&&n,null==o||!o.errors){e.next=9;break}throw s=null===(c=o.errors[0])||void 0===c?void 0:c.serviceResponse,(l=new Error(s)).serviceResponse=JSON.parse(s),l;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"deleteFriend",value:(u=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutate("\n    mutation deleteFriend($friendId: String!) {\n        Friends {\n            deleteFriend(friendToDelete: $friendId) {\n                success\n            }\n        }\n    }\n",{friendId:t});case 2:if(o=e.sent,u=null!==(n=null===(r=o.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(a=i.deleteFriend)||void 0===a?void 0:a.success)&&void 0!==n&&n,!o.errors){e.next=9;break}throw s=null===(c=o.errors[0])||void 0===c?void 0:c.serviceResponse,(l=new Error(s)).serviceResponse=JSON.parse(s),l;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"unblockFriend",value:(a=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutate("\nmutation unblock($friendToUnblock: String!) {\n  Friends {\n    unblock(friendToUnblock: $friendToUnblock) {\n      success\n    }\n  }\n}\n",{friendToUnblock:t});case 2:if(o=e.sent,u=null!==(n=null===(r=o.data)||void 0===r||null===(i=r.Friends)||void 0===i||null===(a=i.unblock)||void 0===a?void 0:a.success)&&void 0!==n&&n,null==o||!o.errors){e.next=9;break}throw s=null===(c=o.errors[0])||void 0===c?void 0:c.serviceResponse,(l=new Error(s)).serviceResponse=JSON.parse(s),l;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"getFriends",value:(i=(0,p.Z)(d().mark((function e(){var t,n,r,i,a,o,u,c,s,l,p,f,v,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.query("\nquery friends($displayNames: Boolean) {   \n    Friends {\n        summary(displayNames: $displayNames) {\n            friends {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n            incoming {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n            outgoing {\n                account {\n                    id\n                    displayName\n                    externalAuths {\n                        type\n                        externalDisplayName\n                    }\n                }\n            }\n        }\n    }\n}\n",{displayNames:!1});case 2:return l=e.sent,p=(null===(t=l.data)||void 0===t||null===(n=t.Friends)||void 0===n||null===(r=n.summary)||void 0===r?void 0:r.friends)||[],f=(null===(i=l.data)||void 0===i||null===(a=i.Friends)||void 0===a||null===(o=a.summary)||void 0===o?void 0:o.incoming)||[],v=(null===(u=l.data)||void 0===u||null===(c=u.Friends)||void 0===c||null===(s=c.summary)||void 0===s?void 0:s.outgoing)||[],h=[].concat((0,re.Z)(ue(p,"accepted")),(0,re.Z)(ue(f,"incoming")),(0,re.Z)(ue(v,"outgoing"))),e.abrupt("return",ae(h));case 8:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"getFriend",value:(r=(0,p.Z)(d().mark((function e(t,n){var r,i,a,o,u,c,s,l,p,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.query("\nquery account($accountId: String) {   \n    Account {\n        account(id: $accountId) {\n            id\n            displayName\n            externalAuths {\n                type\n                externalDisplayName\n            }\n        }\n    }\n}\n",{accountId:t});case 2:return p=e.sent,f=null===(r=p.data)||void 0===r||null===(i=r.Account)||void 0===i?void 0:i.account,e.abrupt("return",{id:null==f||null===(a=f[0])||void 0===a?void 0:a.id,displayName:(null==f||null===(o=f[0])||void 0===o?void 0:o.displayName)||(null==f||null===(u=f[0])||void 0===u||null===(c=u.externalAuths)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.externalDisplayName),type:n,externalAuths:oe(null==f||null===(l=f[0])||void 0===l?void 0:l.externalAuths)});case 5:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"setPrivacySettings",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.mutate("\nmutation setPrivacySettings($acceptInvites: FriendInviteType!) {\n  Friends {\n    setSettings(data: {acceptInvites: $acceptInvites}) {\n      acceptInvites\n    }\n  }\n}\n",{acceptInvites:t});case 2:if(a=e.sent,o=(null===(n=a.data)||void 0===n||null===(r=n.Friends)||void 0===r||null===(i=r.setSettings)||void 0===i?void 0:i.acceptInvites)===t.toString(),null==a||!a.errors){e.next=9;break}throw c=null===(u=a.errors[0])||void 0===u?void 0:u.serviceResponse,(s=new Error(c)).serviceResponse=JSON.parse(c),s;case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"getPrivacySettings",value:(t=(0,p.Z)(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.query("\nquery privacySettings {\n  Friends {\n    settings {\n      acceptInvites\n    }\n  }\n}\n");case 2:return i=e.sent,a=null===(t=i.data)||void 0===t||null===(n=t.Friends)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.acceptInvites,e.abrupt("return",a?a.toString():ie.X.All);case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}());var se=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"reason",void 0),(0,v.Z)(this,"version",void 0),(0,v.Z)(this,"initializations",[]),this.reason=t,this.version=n}return(0,f.Z)(e,[{key:"state",value:function(e,t){return this.add(e,t,!1)}},{key:"collection",value:function(e,t,n){return this.add(e,t,!0,n)}},{key:"add",value:function(e,t,n,r){var i={feature:e.feature,name:e.name,collection:n,keyName:r,reason:this.reason,version:this.version,state:t};return this.initializations.push(i),this}},{key:"build",value:function(){return this.initializations}}]),e}();function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initialization",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1.0.0";return new se(e,t)}var de=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"reason",void 0),(0,v.Z)(this,"version",void 0),(0,v.Z)(this,"collectionUpdates",[]),(0,v.Z)(this,"stateUpdates",[]),this.reason=t,this.version=n}return(0,f.Z)(e,[{key:"add",value:function(e,t,n){var r=this.getCollectionUpdate(e,n);return r.add?r.add.push(t):r.add=[t],this}},{key:"updateItem",value:function(e,t,n){var r=this.getCollectionUpdate(e,n);return r.update?r.update.push(t):r.update=[t],this}},{key:"remove",value:function(e,t,n){var r=this.getCollectionUpdate(e,n);return r.remove?r.remove.push(t):r.remove=[t],this}},{key:"set",value:function(e,t){return this.update(e,t)}},{key:"update",value:function(e,t){return this.getStateUpdate(e).state=t,this}},{key:"build",value:function(){return this.stateUpdates.concat(this.collectionUpdates)}},{key:"getStateUpdate",value:function(e){return this.stateUpdates.find((function(t){var n=t.feature,r=t.name;return n===e.feature&&r===e.name}))||this.createStateUpdate(e)}},{key:"createStateUpdate",value:function(e){var t={feature:e.feature,name:e.name,collection:!1,reason:this.reason,version:this.version};return this.stateUpdates.push(t),t}},{key:"getCollectionUpdate",value:function(e,t){return this.collectionUpdates.find((function(t){var n=t.feature,r=t.name;return n===e.feature&&r===e.name}))||this.createCollectionUpdate(e,t)}},{key:"createCollectionUpdate",value:function(e,t){var n={feature:e.feature,name:e.name,collection:!0,keyName:t||"id",reason:this.reason,version:this.version};return this.collectionUpdates.push(n),n}}]),e}();function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"internal-1.0.0";return new de(e,t)}var fe=n(28043),ve=n(13782);function he(e){return e.changes(ve.Qb).pipe((0,F.O)(e.get(ve.Qb)),(0,fe.x)(ye))}function ye(e,t){return e.authToken===t.authToken&&e.elevatedToken===t.elevatedToken}var me,be=n(76974),ge=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;(0,o.Z)(this,e),(0,v.Z)(this,"features",[Y.Nx,W.ut]),(0,v.Z)(this,"connection",null),(0,v.Z)(this,"epicConnect",void 0),(0,v.Z)(this,"sendUpdates",void 0),me||(me=new B(t,n)),this.epicConnect=me,this.sendUpdates=function(e){console.warn("Updates sent before register",e)}}var t,n,i,a,u,c,s,l;return(0,f.Z)(e,[{key:"initialize",value:function(e){return this.sendUpdates=e,Promise.resolve([])}},{key:"handleIntent",value:function(e){switch(e.name){case"connect-presence":return this.connectPresence(e);default:return!1}}},{key:"connectPresence",value:function(e){var t=e.payload.account,n=this.getToken(t);return n&&this.connect(t,n),Promise.resolve([])}},{key:"getToken",value:function(e){var t=e.authToken;return e.elevatedToken||(function(e){return e&&e.startsWith("eg1~")}(t)?t:void 0)}},{key:"getInitialPresence",value:(l=(0,p.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getFriends();case 2:return t=e.sent,n=Q(t),e.abrupt("return",le("epic-connect-init").collection(Y._O,t).collection(W.ct,n).build());case 5:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"connect",value:(s=(0,p.Z)(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInitialPresence();case 2:r=e.sent,this.sendUpdates(r),null!==this.connection&&this.connection.disconnect(),this.connection=this.epicConnect.connect(t,n),this.handleMessages(this.connection,t);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"handleMessages",value:function(e,t){var n=this;e.messages.pipe((0,ee.b)((function(e){return n.handleMessage(e,t)})),(0,te.K)((function(e){return console.error("Error processing epic connect message",e),(0,be.of)([])}))).subscribe((function(e){return n.sendUpdates(e)}))}},{key:"handleMessage",value:(c=(0,p.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("MESSAGE",t),e.t0=t.type,e.next=e.t0===r.PresenceUpdate?4:e.t0===r.FriendAdded?5:e.t0===r.FriendRemoved?6:e.t0===r.FriendUpdated?7:e.t0===r.FriendInviteAdded?8:e.t0===r.FriendInviteRemoved?9:e.t0===r.FriendBlocked?10:e.t0===r.FriendUnblocked?11:12;break;case 4:return e.abrupt("return",this.presenceUpdate(t));case 5:return e.abrupt("return",this.friendAdded(t,n));case 6:return e.abrupt("return",this.friendRemoved(t,n));case 7:return e.abrupt("return",this.friendUpdated(t));case 8:return e.abrupt("return",this.friendInviteAdded(t,n));case 9:return e.abrupt("return",this.friendInviteRemoved(t,n));case 10:return e.abrupt("return",this.friendBlocked(t));case 11:return e.abrupt("return",this.friendUnblocked(t));case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"presenceUpdate",value:function(e){var t=function(e){if("offline"===e.status)return{id:e.accountId,status:"offline",appId:"",appName:"",joinable:!1,platform:"unknown",sameSession:!1};var t=e.perNs.filter((function(e){return"_"!==e.ns}));if(t.length>0){var n=function(e){var t=e.activity.value?e.activity.value:void 0;if(e.productId){var n=e;return{appId:n.appId,appName:n.props.EOS_ProductName,detailedStatus:t,joinable:!1,sameSession:!1,platform:G(n.props.EOS_Platform),status:H(n.status)}}var r,i=e;return{appId:i.ns,appName:(null===(r=i.props)||void 0===r?void 0:r.X_NonEOS_ProductName)||"Playing a Game",detailedStatus:t,joinable:!1,sameSession:!1,platform:"unknown",status:H(i.status)}}(t.sort((function(e,t){return K[e.status]-K[t.status]}))[0]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.accountId},n)}var r=e.perNs.find((function(e){return"_"===e.ns}));return r?{id:e.accountId,appId:"_",status:H(r.status),appName:"",joinable:!1,platform:"unknown",sameSession:!1}:{id:e.accountId,status:"offline",appId:"",appName:"",joinable:!1,platform:"unknown",sameSession:!1}}(e.payload);return pe("presence-update").updateItem(W.ct,t).build()}},{key:"getFriendId",value:function(e,t){var n=e.from,r=e.to;return{accountId:t.id==n?r:n,direction:t.id==n?"outgoing":"incoming"}}},{key:"friendAdded",value:(u=(0,p.Z)(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFriendId(t.payload,n),i=r.accountId,e.next=3,ce.getFriend(i,"accepted");case 3:return a=e.sent,e.abrupt("return",pe("friend-added").updateItem(Y._O,a).build());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"friendRemoved",value:function(e,t){var n=this.getFriendId(e.payload,t).accountId;return pe("friend-removed").remove(Y._O,n).remove(W.ct,n).build()}},{key:"friendUpdated",value:(a=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.friendId,e.next=3,ce.getFriend(n,"accepted");case 3:return r=e.sent,e.abrupt("return",pe("friend-updated").updateItem(Y._O,r).build());case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"friendInviteAdded",value:(i=(0,p.Z)(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFriendId(t.payload,n),i=r.accountId,a=r.direction,e.next=3,ce.getFriend(i,a);case 3:return o=e.sent,e.abrupt("return",pe("friend-invite-added").add(Y._O,o).build());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"friendInviteRemoved",value:function(e,t){var n=this.getFriendId(e.payload,t).accountId;return pe("friend-invite-removed").remove(Y._O,n).build()}},{key:"friendBlocked",value:(n=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getFriend(t.payload.accountId,"BLOCKED");case 2:return n=e.sent,e.abrupt("return",pe("friend-blocked-updated").updateItem(Y.ok,n).build());case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"friendUnblocked",value:(t=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getFriend(t.payload.accountId,"NOT_FRIEND");case 2:return n=e.sent,e.abrupt("return",pe("friend-unblocked-updated").updateItem(Y.ok,n).build());case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),ke=n(79143);function we(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"id",void 0),(0,v.Z)(this,"intent",void 0),(0,v.Z)(this,"sendUpdates",void 0),this.id=(0,X.v4)(),this.intent=t,this.sendUpdates=n}return(0,f.Z)(e,[{key:"processing",value:function(){var e=this.createStatus("processing"),t=pe("add-intent-status").add(ke.bo,e).build();return this.sendUpdates(t),e}},{key:"complete",value:function(e){var t=this.createStatus("complete"),n=pe("update-intent-status").updateItem(ke.bo,{id:this.id,status:"complete"}).build();return this.sendUpdates(e.concat(n)),t}},{key:"notSent",value:function(){var e={id:this.id,correlationId:this.id,status:"not-sent",intentName:this.intent.name},t=pe("update-intent-status").updateItem(ke.bo,{id:this.id,status:"not-sent"}).build();return this.sendUpdates(t),e}},{key:"error",value:function(e,t){var n={id:this.id,correlationId:this.id,status:"error",intentName:this.intent.name,errorCode:t||this.errorCode(),errorMessage:e},r=pe("update-intent-status").updateItem(ke.bo,{id:this.id,status:"error",errorCode:t||this.errorCode(),errorMessage:e}).build();return this.sendUpdates(r),n}},{key:"createStatus",value:function(e){return{id:this.id,correlationId:this.id,status:e,intentName:this.intent.name}}},{key:"errorCode",value:function(){var e=this.intent,t=e.feature,n=e.name;return"".concat(t,".").concat(n,".error")}}]),e}(),Ie=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"platforms",void 0),(0,v.Z)(this,"sendUpdates",void 0),(0,v.Z)(this,"registered",void 0),(0,v.Z)(this,"info",void 0),this.platforms=t,this.registered=!1,this.info=n,this.sendUpdates=function(){}}var t,n,r,i;return(0,f.Z)(e,[{key:"addFeature",value:(i=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.platforms.push(t),!this.registered||!t.initialize){e.next=6;break}return e.next=4,t.initialize(this.sendUpdates);case 4:n=e.sent,this.sendUpdates(n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"removeFeature",value:function(e){this.platforms=this.platforms.filter((function(t){return t===e}))}},{key:"platformFeatures",value:function(){return this.platforms.reduce((function(e,t){return e.concat(t.features)}),[])}},{key:"getFeatures",value:function(){return Promise.resolve(this.platformFeatures())}},{key:"getInfo",value:function(){return Promise.resolve(this.info)}},{key:"sendIntent",value:(r=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Oe(t,this.sendUpdates),r=n.processing(),!1!==(i=this.forwardIntentToPlatform(t))){e.next=7;break}return e.abrupt("return",Promise.resolve(n.notSent()));case 7:return this.updateWhenComplete(n,i),e.abrupt("return",Promise.resolve(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"forwardIntentToPlatform",value:function(e){var t,n=we(this.platforms.filter((function(t){return t.features.includes(e.feature)})));try{for(n.s();!(t=n.n()).done;){var r=t.value.handleIntent(e);if(!1!==r)return r}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"register",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sendUpdates=t,n=[],r=we(this.platforms),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=20;break}if(!(a=i.value).initialize){e.next=18;break}return e.prev=8,e.next=11,a.initialize(this.sendUpdates);case 11:o=e.sent,n.push.apply(n,(0,re.Z)(o)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("Failed to initialize platform ".concat(a),e.t0);case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(3),r.e(e.t1);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return this.registered=!0,e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,this,[[3,22,25,28],[8,15]])}))),function(e){return n.apply(this,arguments)})},{key:"updateWhenComplete",value:(t=(0,p.Z)(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:r=e.sent,t.complete(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=e.t0.errorMessage||e.t0.message,t.error(i,e.t0.errorCode);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,n){return t.apply(this,arguments)})}]),e}(),Se=n(92733),Te=n(85321),Ze=n(2942),Pe=n(62004),Ae=n.n(Pe),Ee=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Se.k])}var t,n;return(0,f.Z)(e,[{key:"initialize",value:(n=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfo();case 2:return n=e.sent,this.handleAccountChanges(n,t),e.abrupt("return",le("account-init").state(ve.Qb,n).state(Ze.x2,{appId:"_",appName:"",active:!1,invitesAllowed:!1,isLobby:!1}).build());case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleIntent",value:function(){return!1}},{key:"handleAccountChanges",value:function(e,t){this.onAccountChanged(e).subscribe((function(e){var n=pe("update-account").set(ve.Qb,e).build();t(n)}))}},{key:"onAccountChanged",value:function(e){var t=this;return(0,h.F)(3e5).pipe((0,F.O)(e),(0,Te.zg)((function(){return t.getAccountInfo()})),(0,fe.x)(Ae()))}},{key:"getAccountInfo",value:(t=(0,p.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserData();case 2:return t=e.sent,e.abrupt("return",t?this.toMyAccount(t):void 0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toMyAccount",value:function(e){return{id:e.userid,displayName:e.displayname,authToken:e.accesstoken}}},{key:"getUserData",value:function(){return window.ue.common.getsignedinuser()}}]),e}(),Ne=n(55395),je=n(14206),Fe=n.n(je),Ce=n(68891),Re=function(){function e(t,n,r,i){(0,o.Z)(this,e),(0,v.Z)(this,"client",void 0),(0,v.Z)(this,"appId",void 0),(0,v.Z)(this,"buildId",void 0),(0,v.Z)(this,"env",void 0),this.appId=n,this.buildId=r,this.env=i,this.client=Fe().create({baseURL:t})}var t;return(0,f.Z)(e,[{key:"sendEvent",value:(t=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.post("/datarouter/api/v1/public/data?".concat((0,Ce.stringify)({AppID:this.appId,AppVersion:this.buildId,AppEnvironment:this.env,UploadType:"eteventstream"})),{Events:[t]});case 3:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Ue=n(49708),De=pe("hotkeydown").update(ke.sc,{pressed:!0}).build(),Me=pe("hotkeyup").update(ke.sc,{pressed:!1}).build();function _e(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze().sendintent({feature:t.feature,name:t.name,payload:JSON.stringify(t.payload)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return window.ue.social}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Le=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var i=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=r.call(this,e),(0,v.Z)((0,Ne.Z)(t),"dataRouter",void 0),t.dataRouter=new Re("https://datarouter.ol.epicgames.com","social-modules","77255c779adc9907802d36ba45b08e73612e761a","prod"),t}return(0,f.Z)(i,[{key:"handleIntent",value:function(e){if("log-analytic"===e.name){var t=e.payload,n=t.eventName,r=t.data;return this.dataRouter.sendEvent(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({EventName:n},r)),Promise.resolve([])}var i,a;return"open-friend-linking"===e.name&&(null===(i=(a=ze()).openfriendlinking)||void 0===i||i.call(a),Promise.resolve([]))}}]),i}(function(){function e(t){(0,o.Z)(this,e),(0,v.Z)(this,"features",[ke.gn]),(0,v.Z)(this,"locale",void 0),this.locale=t}var t;return(0,f.Z)(e,[{key:"initialize",value:(t=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleHotkeys(t),e.abrupt("return",le("app-info-init").state(ke.my,{locale:this.locale,visible:!1,displayPreference:"topRight",launchPlatform:"unknown"}).build());case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleIntent",value:function(e){if("log-analytic"===e.name){var t=e.payload;return function(e,t){if("undefined"==typeof window)throw new Error("epic-tracking is meant to be running in browser environment only");window._epicTracking&&"object"!=typeof!window._epicTracking?window._epicTracking.trackEvent(e,t):console.error("Unable to find _epicTracking object in global, please make sure it is installed")}(t.code,t.data),Promise.resolve([])}return!1}},{key:"handleHotkeys",value:function(e){this.hotKeyEvents("keydown").subscribe((function(){return e(De)})),this.hotKeyEvents("keyup").subscribe((function(){return e(Me)}))}},{key:"hotKeyEvents",value:function(e){return(0,Ue.R)(window,e).pipe((0,b.h)((function(e){return e.shiftKey&&"Tab"===e.key})))}}]),e}()),Xe=n(86561);function Be(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Ze.vc])}var t;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){switch(e.name){case"accept-game-invite":return this.handleAcceptGameInvite(e);default:return!1}}},{key:"handleAcceptGameInvite",value:(t=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(t.payload.appId);case 2:if(!e.sent){e.next=8;break}return _e(t),e.abrupt("return",Promise.resolve(this.loadingNotificationUpdates(t)));case 8:throw{errorMessage:"Game not ready",errorCode:"social.error.game.gamenotready"};case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"loadingNotificationUpdates",value:function(e){var t={type:"game-launching",payload:{appName:e.payload.appName}};return pe("game-loading").add(Xe.T,t).build()}}]),e}(),He=[{key:"iswaitinginline",val:!1},{key:"iscloudsyncing",val:!1},{key:"isupdating",val:!1},{key:"isinupdatequeue",val:!1},{key:"isrunning",val:!1},{key:"ispartiallyinstalled",val:!1},{key:"iscorrupt",val:!1},{key:"hasupdate",val:!1},{key:"isinstalled",val:!0},{key:"isbanned",val:!1}];function Je(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ue){e.next=7;break}return e.next=3,window.ue.productinfo.getinstalledapps();case 3:i=e.sent,n=null!==(r=null==i?void 0:i.products)&&void 0!==r?r:[],e.next=8;break;case 7:n=[];case 8:if(a=n.find((function(e){return e.appname===t}))){e.next=11;break}return e.abrupt("return",!1);case 11:o=Be(He),e.prev=12,o.s();case 14:if((u=o.n()).done){e.next=21;break}if(c=u.value,s=c.key,l=c.val,a[s]===l){e.next=19;break}return e.abrupt("return",!1);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:if("RESTRICTED"!==a.serverstatus&&"OFFLINE"!==a.serverstatus){e.next=31;break}return e.abrupt("return",!1);case 31:return e.abrupt("return",!0);case 32:case"end":return e.stop()}}),e,null,[[12,23,26,29]])})))).apply(this,arguments)}var We=n(42822),Qe=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[We.x])}var t,n;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"update-settings":return this.updateSettings(n);default:return!1}}},{key:"updateSettings",value:(n=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toggleLauncherSettings(t);case 2:return e.abrupt("return",Promise.resolve(pe("update-settings").update(We.Z,t).build()));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"toggleLauncherSettings",value:(t=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ze().setshownotificationsenabled,r=ze().setautodeclinefriendrequestsenabled,void 0===t.autodecline){e.next=18;break}return e.prev=3,e.next=6,ce.setPrivacySettings(t.autodecline?ie.X.None:ie.X.All);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!(i=e.t0.serviceResponse)){e.next=13;break}throw Error(i.errorCode);case 13:throw Error("errors.com.epicgames.unknown");case 14:if(e.t1=r,!e.t1){e.next=18;break}return e.next=18,r(t.autodecline);case 18:if(void 0===t.donotdisturb||!n){e.next=21;break}return e.next=21,n(!t.donotdisturb);case 21:case"end":return e.stop()}}),e,null,[[3,8]])}))),function(e){return t.apply(this,arguments)})}]),e}();function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Ze.vc])}var t,n;return(0,f.Z)(e,[{key:"initialize",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ze(),r=n.registerstateslistener){e.next=3;break}return e.abrupt("return",Promise.resolve([]));case 3:return r((function(e){try{var n=i.transformUpdate(e);t([n])}catch(e){console.error("Error parsing update",e)}}),this.features),e.abrupt("return",Promise.resolve([]));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleIntent",value:(t=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"transformUpdate",value:function(e){var t=JSON.parse(e.payload),n=et(et({keyName:"friendId"},e),t);return delete n.payload,n}}]),e}();var nt=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var i=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function i(e,t,n){return(0,o.Z)(this,i),r.call(this,[new ge(t),new Le(n),new Ge,new Ee,new Qe,new tt],e)}return i}(Ie),rt=n(42657),it=n(5291),at=a().createElement,ot=function(e){var t=e.children,n=e.forceOpen,r=a().useState(!1),i=(0,rt.Z)(r,2),o=i[0],u=i[1],c=a().useMemo((function(){return{open:o,setOpen:u,forceOpen:n}}),[o,n]);return at(it.h.Provider,{value:c},t)},ut=n(85437),ct=n(70897),st=[function(e){he(e).subscribe((function(e){var t=e.authToken,n=e.elevatedToken;z.setAuthToken(n||t)}))},function(){var e=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.service(ct.g),e.next=3,t.waitFor(ve.Qb,(function(e){return""!==e.id}));case 3:return e.next=5,t.waitFor(ut.bX);case 5:"egs-launcher"!==(null==(r=e.sent)?void 0:r.platformName)&&(i={type:"status",payload:{status:"online"}},n.addNotification(i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitFor(ut.p0);case 2:n=e.sent,t.changes(ve.fA).pipe((0,F.O)(t.get(ve.fA)),(0,b.h)((function(e){return!!e}))).subscribe((function(e){var t=e.exchangeCode,r=e.codeVerifier,i={name:"exchange-token",feature:Se.k,payload:{exchangeCode:t,codeVerifier:r}};n.sendIntent(i)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()],lt=n(77026),dt=n(68425),pt=n(78146),ft=n(55935);function vt(e,t,n){return e.changes(t).pipe((0,F.O)(e.get(t)),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return function(n){return n.pipe((0,dt.J)(),(0,pt.v)((function(e){return e[t]})),(0,Te.zg)((function(t){return t.pipe((0,fe.x)((function(t,n){return!e(t,n)})),(0,ft.T)(1))})))}}(n))}var ht=n(24209),yt=n(87084),mt=n(48610);function bt(e,t){var n=null;(0,ht.T)((0,be.of)(e.get((0,mt.u)(t.flag))),e.changes((0,mt.u)(t.flag))).subscribe((function(e){e?n=t.enable():n&&n()}))}function gt(e,t){return function(n){!function(e,t){var n=null;(0,ht.T)((0,be.of)(e.get((0,yt.z)(t.feature))),e.changes((0,yt.z)(t.feature))).subscribe((function(e){e?n=t.enable():n&&n()}))}(n,{feature:e,enable:function(){return t(n)}})}}var kt=function(e,t){return"earned"!==e.status&&"earned"===t.status},wt=gt(lt.Hb,(function(e){var t=e.service(ct.g),n=vt(e,lt.Xn,kt).subscribe((function(n){Object.keys(e.get(lt.KJ)).length>0||function(e,n){var r={type:"earned-achievement",payload:{id:e.id,name:e.name,iconUrl:e.iconUrl}};t.addNotification(r)}(n)}));return function(){return n.unsubscribe()}})),xt=gt(lt.Gy,(function(e){var t=e.service(ct.g),n=vt(e,lt.Xn,kt).subscribe((function(n){var r=e.get(lt.KJ);Object.keys(r).length>0&&function(e,n,r){var i=e.id,a={type:"earned-egs-achievement",payload:{title:r[i].unlockedDisplayName,unlockedIconLink:r[i].unlockedIconLink,XP:r[i].XP,tier:r[i].tier}};t.addNotification(a)}(n,0,r)}));return function(){return n.unsubscribe()}})),Ot=[function(e){bt(e,{flag:"egs-achievements-enabled",enable:function(){var t=function(e){var t=e.get(ke.my).locale;return e.changes(ut.J).pipe((0,F.O)(e.get(ut.J)),(0,fe.x)(),(0,b.h)((function(e){return Boolean(null==e?void 0:e.pfsid)}))).subscribe((function(n){n&&function(n){var r=function(e){return{sandboxId:e.pfsid}}(n).sandboxId;if(r){var i={name:"fetch-egs-data",feature:lt.Gy,payload:{sandboxId:r,locale:t}};e.get(ut.p0).sendIntent(i)}}(n)}))}(e);return function(){t.unsubscribe()}}})},wt,xt];function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e,t){return St(St({},e),{},{payload:St(St({},e.payload||{}),t)})}var Zt={intercept:function(e,t){var n=t.get(Ze.x2),r=t.get(ut.bX);return Tt(e,{Platform:(null==r?void 0:r.platformName)||"unknown",CurrentGameId:n.appId,Joinable:n.invitesAllowed,CurrentGameName:n.appName})}},Pt={intercept:function(e){return Tt(e,{Env:"prod"})}};function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et={shouldIntercept:function(e){var t=e.payload;return function(e){return"ScreenViewed"===e.Event}(t)&&t.Name===ie.ScreenName.Friends},intercept:function(e,t){var n,r,i=t.get(Ze.AI),a=t.get(W.ct),o=t.get(Xe.T),u=(n={},(0,v.Z)(n,ie.UserState.Online,0),(0,v.Z)(n,ie.UserState.Offline,0),(0,v.Z)(n,ie.UserState.Away,0),n),c={},s={},l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(a);try{for(l.s();!(r=l.n()).done;){var d=r.value,p="appId"in d?d.appId:"_";switch(Nt(u,status),status){case"online":Nt(c,p);break;case"away":case"extendedAway":Nt(s,p)}}}catch(e){l.e(e)}finally{l.f()}return Tt(e,{Name:e.payload.Name,IncomingGameInvites:i.length,FriendCountByPresence:u,OnlineFriendCountByApp:c,AwayFriendCountByApp:s,BadgeCount:o.length})}};function Nt(e,t){if(t&&t.length>0){var n=e[t]||0;e[t]=n+1}}var jt,Ft={intercept:function(e){return Tt(e,{GitHash:"77255c779adc9907802d36ba45b08e73612e761a"})}},Ct=n(87674),Rt={shouldIntercept:function(e){return!!e.tags&&e.tags.includes("intent")},intercept:(jt=(0,p.Z)(d().mark((function e(t,n){var r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return n.waitForNext(ke.ch,(function(e){return e.id===i}))},r=Date.now(),i=t.payload.IntentId,"processing"!==(null==(o=n.get((0,Ct.P)(i)))?void 0:o.status)){e.next=10;break}return e.next=7,a();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:return u=e.t0,e.abrupt("return",Tt(t,{DurationMs:Date.now()-r,isSuccess:"complete"===u.status,ErrorMessage:u.errorMessage||u.errorCode||"unknown error"}));case 13:case"end":return e.stop()}}),e)}))),function(e,t){return jt.apply(this,arguments)})},Ut={id:"launch-time"},Dt={id:"overlay-open-time",defaultValue:0},Mt={id:"pending-intents",defaultValue:{}},_t={id:"overlay-open-count",defaultValue:0},qt={id:"game-invites-sent",defaultValue:0},zt={id:"game-invites-received",defaultValue:0},$t={id:"game-invites-accepted",defaultValue:0},Lt=[Pt,Zt,Et,Rt,{intercept:function(e,t){var n=Date.now(),r=t.get(Ut);return Tt(e,{LaunchTime:r,MsSinceLaunch:n-r,OverlayOpenTime:t.get(Dt)})}},{shouldIntercept:function(e){return"Search"===e.payload.Event},intercept:function(e,t){var n;return Tt(e,{ResultCount:(null===(n=t.get(Y.ok))||void 0===n?void 0:n.length)||0})}},{intercept:function(e,t){var n=t.get(We.Z);return Tt(e,{AccountId:t.get(ve.Qb).id,CurrentState:ie.UserState.Online,isDoNotDisturbEnabled:n.donotdisturb})}},{intercept:function(e,t){var n=t.get(ut.bX);return Tt(e,{PlatformVersion:n?n.platformVersion:"0.0.0",PlatformName:n?n.platformName:"unknown",OsName:n?n.osName:"unknown",OsVersion:n?n.osVersion:"0.0.0",ProductName:n?n.productName:"unknown",ProductVersion:n?n.productVersion:"0.0.0",ProductId:n?n.productId:"unknown"})}},Ft];function Xt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(d().mark((function e(t,n){var r,i,a,o,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t,i=Xt(Lt),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=18;break}if(o=a.value,u=o.shouldIntercept,c=o.intercept,e.prev=6,u&&!u(r)){e.next=11;break}return e.next=10,c(r,n);case 10:r=e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),i.e(e.t1);case 23:return e.prev=23,i.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,null,[[2,20,23,26],[6,13]])})))).apply(this,arguments)}function Ht(e){var t=e.code,n=e.payload;return{name:"log-analytic",feature:ke.gn,payload:{eventName:t,data:n}}}var Jt=function(){var e=(0,p.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitFor(ut.bX);case 2:(0,L.c)({code:"eos.social.appstartup",payload:{Event:"AppStartup"}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Kt(e){return function(t){return t.get(Mt)[e]}}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t){return function(n){function r(){return(r=(0,p.Z)(d().mark((function r(i){var a,o;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i.id,r.next=3,n.waitFor(Kt(a));case 3:o=r.sent,(0,L.c)({code:"eos.social.".concat(e),tags:["intent"],payload:Qt({IntentId:a},t(o,n))});case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}n.stream(ke.Pz).pipe((0,b.h)((function(t){return t.intentName===e}))).subscribe((function(e){!function(e){r.apply(this,arguments)}(e)}))}}function en(e,t){return Yt(e,(function(e){return{Event:"ClientFriendship",OtherUserId:e.payload.id,Type:t,Method:ie.CommonMethod.Click}}))}var tn=[Yt("query-friend-search",(function(){return{Event:"Search",Type:ie.SearchType.Friends}})),en("request-friend",ie.FriendshipActionType.SendRequest),en("accept-friend-request",ie.FriendshipActionType.AcceptRequest),en("dismiss-friend-request",ie.FriendshipActionType.IgnoreRequest),en("block-friend",ie.FriendshipActionType.Block),en("unblock-friend",ie.FriendshipActionType.Unblock)],nn=n(94607),rn=n(61798),an=Yt("game-invite",(function(e,t){return t.set(qt,t.get(qt)+1),un(t,ie.InviteActionType.Send,e.payload.id)})),on=Yt("join-game",(function(e,t){return un(t,ie.InviteActionType.Join,e.payload.friendId)}));function un(e,t,n){var r=e.get((0,rn.N)(n));return r&&"appName"in r?{Event:"Invite",InviteType:ie.InviteType.Game,Type:t,OtherUserId:n,OtherUserGameId:r.appId,OtherUserGameName:r.appName,Method:ie.CommonMethod.Click,isJoinable:r.joinable,isOnline:"online"===r.status}:{Event:"Invite",InviteType:ie.InviteType.Game,Type:t,OtherUserId:n,OtherUserGameId:"unknown",OtherUserGameName:"unknown",Method:ie.CommonMethod.Click,isJoinable:!1,isOnline:!1}}var cn=[an,Yt("accept-game-invite",(function(e,t){return t.set($t,t.get($t)+1),un(t,ie.InviteActionType.Accept,e.payload.friendId)})),Yt("dismiss-game-invite",(function(e,t){return un(t,ie.InviteActionType.Dismiss,e.payload.friendId)})),on,function(e){e.changes(Ze.AI).pipe((0,dt.J)(),(0,nn.E)((function(e){return e.key})),(0,m.U)((function(t){return un(e,ie.InviteActionType.Receive,t.friendId)}))).subscribe((function(t){e.set(zt,e.get(zt)+1),(0,L.c)({code:"eos.social.game-invite-received",tags:[],payload:t})}))}],sn=function(){var e=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){(0,L.c)({code:"eos.social.heartbeat",payload:{Event:"HeartBeat",GameInvitesRecieved:t.get(zt),OverlayOpenCount:t.get(_t),GameInvitesAccepted:t.get($t),GameInvitesSent:t.get(qt),HasEpicAchievements:n()}})},n=function(){return Object.keys(t.get(lt.KJ)).length>0},e.next=4,t.waitFor(ut.bX);case 4:r(),(0,h.F)(3e5).subscribe((function(){return r()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ln=n(24713),dn=n(16118),pn=function(){var e=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitFor(ut.p0);case 2:n=e.sent,t.stream(ke.ch).subscribe((function(e){var n=e.id;t.modify(Mt,(function(e){delete e[n]}))})),r=n.sendIntent,n.sendIntent=function(){var e=(0,p.Z)(d().mark((function e(i){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.call(n,i);case 2:return a=e.sent,t.modify(Mt,(function(e){e[a.id]=i})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fn=Yt("add-notification",(function(e){return{Event:"AddNotification",NotificationType:e.payload.type}})),vn=[function(e){function t(){return(t=(0,p.Z)(d().mark((function t(n){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vt(n,e);case 2:return r=t.sent,t.next=5,e.waitFor(ut.p0);case 5:t.sent.sendIntent(Ht(r));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(0,L.K)((function(e){!function(e){t.apply(this,arguments)}(e)}))},Jt].concat((0,re.Z)(tn),(0,re.Z)(cn),[sn,function(e){e.changes(Ze.x2).pipe((0,ln.j)("invitesAllowed"),(0,fe.x)(),(0,dn.G)()).subscribe((function(t){var n=(0,rt.Z)(t,1)[0],r=e.get(We.Z);(0,L.c)({code:"eos.social.statechange",payload:{Event:"StateChange",PreviousState:ie.UserState.Online,PreviousJoinable:n,PreviousDoNotDisturbEnabled:r.donotdisturb}})}))},function(e){e.changes(ke.XM).pipe((0,F.O)(e.get(ke.XM)),(0,fe.x)(),(0,b.h)((function(e){return"entered"===e}))).subscribe((function(){e.set(Dt,Date.now())}))},function(e){e.set(Ut,Date.now())},function(e){e.changes(ke.XM).pipe((0,fe.x)(),(0,b.h)((function(e){return"exited"===e}))).subscribe((function(){(0,L.c)({code:"eos.social.overlayclosed",payload:{Event:"OverlayClose",Method:ie.CommonMethod.Click}})}))},pn,function(e){var t=e.service(ct.g);e.changes(We.Z).pipe((0,dn.G)()).subscribe((function(n){var r=(0,rt.Z)(n,2),i=r[0],a=r[1],o=e.get(Ze.x2).invitesAllowed;if((0,L.c)({code:"eos.social.settingschanged",payload:{Event:"StateChange",PreviousState:ie.UserState.Online,PreviousJoinable:o,PreviousDoNotDisturbEnabled:i.donotdisturb}}),i.donotdisturb!==a.donotdisturb){var u={type:"settings-toggle",payload:{name:"donotdisturb",value:a.donotdisturb}};t.addNotification(u)}if(i.autodecline!==a.autodecline){var c={type:"settings-toggle",payload:{name:"autodecline",value:a.autodecline}};t.addNotification(c)}}))},function(e){e.changes(ke.XM).pipe((0,fe.x)(),(0,b.h)((function(e){return"entered"===e}))).subscribe((function(){e.set(_t,e.get(_t)+1),(0,L.c)({code:"eos.social.overlayopened",payload:{Event:"OverlayOpen",Method:ie.CommonMethod.Click}})}))},fn,function(e){e.changes(ke.XM).pipe((0,F.O)(e.get(ke.XM)),(0,fe.x)(),(0,b.h)((function(e){return"exited"===e}))).subscribe((function(){var t=Date.now(),n=e.get(Dt),r=n>0?t-n:0;(0,L.c)({code:"eos.social.overlayopentime",payload:{Event:"OverlayOpenTime",MsSinceOverlayOpen:r}})}))},function(e){e.stream(ke.ob).subscribe((function(e){!function(e){var t="INTENT ERROR (".concat(e.intentName,"):  ").concat(e.errorCode);e.errorMessage&&(t+=" - ".concat(e.errorMessage)),console.error(t)}(e),(0,L.c)({code:"eos.social.intenterror",payload:{IntentName:e.intentName,ErrorCode:e.errorCode,ErrorMessage:e.errorMessage}})}))}]),hn=n(40649);function yn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe((0,dt.J)(),(0,pt.v)((function(e){return e.id})),(0,Te.zg)((function(e){return e.pipe((0,hn.g)("status"),(0,b.h)((function(e){return t.includes(e.status)})))})))}}function mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){t.changes(ke.bo).pipe(yn.apply(void 0,n)).subscribe((function(n){t.dispatch(e,n)}))}}function bn(e,t){return function(n){return n.pipe((0,b.h)((function(n){var r=n[e];return!r||!t.includes(r)})))}}var gn=n(39181),kn=n(55721);function wn(e){var t=e.service(gn.I),n=e.get(Xe.T).length>0,r=e.get(ke.XM),i="exited"!==r,a="entered"===r;t.updateDisplay({visible:n||i,exclusiveInput:a})}var xn=n(95399),On=[function(e){wn(e),(0,ht.T)(e.changes(ke.XM),e.changes(Xe.T)).pipe((0,kn.p)(100)).subscribe((function(){wn(e)}))},function(e){var t=e.service(gn.I);e.changes(ke.XM).pipe((0,g.w)((function(t){return n="exited"!==t?ke.Gx:ke.rO,r=e.get(n),(0,xn.z)((0,be.of)(r),e.changes(n));var n,r}))).subscribe((function(n){e.set(ke.TL,n),t.updateDisplay({hitBox:n})}))},mn(ke.Pz,"processing"),mn(ke.ob,"error"),mn(ke.$4,"complete"),mn(ke.ch,"complete","error"),function(e){var t=e.service(ct.g);e.stream(ke.ob).pipe(bn("intentName",["log-analytic"]),bn("errorCode",["social.error.game.gamenotready"])).subscribe((function(e){var n={type:"error",payload:{errorMessage:e.errorMessage}};t.addNotification(n)}))}];function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zn=function(){var e=(0,p.Z)(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,t){var r={type:t,payload:{friendId:e.id}};n.addNotification(r)},n=t.service(ct.g),e.next=4,t.changes(Y._O).pipe((0,C.q)(1)).toPromise();case 4:r=e.sent,i=r,t.changes(Y._O).subscribe((function(e){e.filter((function(e){return"incoming"===e.type&&!i.find((function(t){return t.id===e.id}))})).forEach((function(e){t.get((0,yt.z)(Y.RK))&&a(e,"friend-request")}))})),t.changes(Y._O).subscribe((function(e){e.filter((function(e){return"accepted"===e.type&&i.find((function(t){return t.id===e.id&&"outgoing"===t.type}))})).forEach((function(e){t.get((0,yt.z)(Y.RK))&&a(e,"friend-request-accepted")}))})),t.changes(Y._O).subscribe((function(e){var r=t.get(Xe.T);i.filter((function(t){return!e.includes(t)})).forEach((function(e){var t=r.find((function(t){return("friend-request"===t.type||"friend-request-accepted"===t.type)&&t.payload.friendId===e.id}));t&&n.removeNotification(t)}))})),t.changes(Y._O).subscribe((function(e){i=e}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Pn(e,t,n){return function(r){r.changes(e).subscribe((function(e){r.set(t,function(e,t){var n={};return e.forEach((function(e){var r=t(e);e!==n[r]&&(n[r]=e)})),n}(e,n))}))}}var An=n(85543),En=n(49533),Nn=n(38682),jn=n(43113),Fn=n(2844),Cn=0,Rn=0;function Un(){var e=new CustomEvent("epic-social.friends",{detail:{count:Cn}});document.dispatchEvent(e)}function Dn(){var e=new CustomEvent("epic-social.notifications",{detail:{count:Rn}});document.dispatchEvent(e)}jn.Z&&document.addEventListener("epic-social.request-values",(function(){Un(),Dn()}));var Mn=[Pn(Y._O,Y.l3,(function(e){return e.id})),Zn,function(e){e.changes(Y.l3).subscribe((function(t){e.modify(Y.ok,(function(e){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.id;t[a]||"outgoing"!==i.type&&"incoming"!==i.type||Object.assign(i,Sn(Sn({},i),{},{type:"NOT_FRIEND",friendshipStatus:"NOT_FRIEND"}))}}catch(e){r.e(e)}finally{r.f()}}))}))},function(e){var t;e.changes(ke.sc).pipe((t="pressed",!0,!1,function(e){return e.pipe((0,fe.x)(),(0,dn.G)(),(0,b.h)((function(e){var n=(0,rt.Z)(e,2),r=n[0],i=n[1];return true===r[t]&&false===i[t]})),(0,m.U)((function(e){return(0,rt.Z)(e,2)[1]})))})).subscribe((function(){e.dispatch(ke.$x,{reason:"hotkey-pressed"})}))},function(e){e.changes(An.a3).pipe((0,m.U)((function(e){return e.length}))).subscribe((function(e){Cn=e,Un()}));var t=e.changes(Nn.h).pipe((0,F.O)(e.get(Nn.h)),(0,m.U)((function(e){return e.length}))),n=e.changes(En.X).pipe((0,F.O)(e.get(En.X)),(0,m.U)((function(e){return e.length})));(0,Fn.aj)(t,n).pipe((0,m.U)((function(e){var t=(0,rt.Z)(e,2);return t[0]+t[1]}))).subscribe((function(e){Rn=e,Dn()}))}];function _n(e,t){return function(n){return n.pipe((0,dt.J)(),(0,pt.v)((function(t){return t[e]})),(0,Te.zg)((function(e){return e.pipe((0,hn.g)(t),(0,ft.T)(1))})))}}var qn=function(e){return e.pipe(_n("id","appId"))},zn=n(38128),$n=n(2768),Ln=n(17343);function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(e,t){var n,r,i=e.service(zn.h),a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(e.get((n=t,function(e){return e.get(Ze.AI).filter((function(e){return e.friendId===n}))})));try{for(a.s();!(r=a.n()).done;){var o=r.value;i.dismissGameInvite(o)}}catch(e){a.e(e)}finally{a.f()}}var Vn=[function(e){bt(e,{flag:"auto-dismiss-stale-invites-enabled",enable:function(){var t=function(e){var t,n,r=e.service(zn.h);return e.changes(Ze.AI).pipe((t=3e5,n="key",function(e){return e.pipe((0,dt.J)(),(0,pt.v)((function(e){return e[n]})),(0,Te.zg)((function(r){var i=e.pipe(function(e,t){var n=function(n){return!n.find((function(n){return n[e]===t}))};return function(e){return e.pipe((0,b.h)(n),(0,Ln.h)(!0))}}(n,r.key));return r.pipe((0,nn.E)(void 0,i),(0,g.w)((function(e){return(0,h.F)(t).pipe((0,$n.R)(i),(0,Ln.h)(e))})))})))})).subscribe((function(e){r.dismissGameInvite(e)}))}(e),n=function(e){return e.changes(W.ct).pipe(qn).subscribe((function(t){Bn(e,t.id)}))}(e),r=function(e){return e.changes(W.ct).pipe(function(e){return function(t){return t.pipe((n="status",r=e,function(e){return e.pipe(_n("id",n),(0,b.h)((function(e){return e[n]===r})))}));var n,r}}("offline")).subscribe((function(t){Bn(e,t.id)}))}(e);return function(){t.unsubscribe(),n.unsubscribe(),r.unsubscribe()}}})},function(e){var t=e.service(ct.g);e.changes(Ze.AI).pipe((0,F.O)([]),(0,dn.G)()).subscribe((function(e){var n=(0,rt.Z)(e,2),r=n[0];n[1].filter((function(e){return!r.includes(e)})).forEach((function(e){t.addNotification({type:"invite",payload:{appId:e.appId,appName:e.appName,friendId:e.friendId}})}))}))}];function Gn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jn=function(){function e(t,n){(0,o.Z)(this,e),(0,v.Z)(this,"primary",void 0),(0,v.Z)(this,"platforms",void 0),(0,v.Z)(this,"platformIndex",void 0),this.primary=t,this.platforms=[t].concat((0,re.Z)(n)),this.platformIndex=null}var t,n,r,i,a,u;return(0,f.Z)(e,[{key:"getPlatforms",value:function(){return this.platforms}},{key:"getPrimaryPlatform",value:function(){return this.primary}},{key:"register",value:(u=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.platformIndex){e.next=3;break}return e.next=3,this.getFeatures();case 3:return e.next=5,this.registerPlatforms(this.platforms);case 5:return n=e.sent,r=n.reduce((function(e,t){return e.concat(t.initialization)}),new Array),i=n.map((function(e){return e.updates})),ht.T.apply(void 0,(0,re.Z)(i)).subscribe(t),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getInfo",value:(a=(0,p.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.primary.getInfo());case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getFeatures",value:(i=(0,p.Z)(d().mark((function e(){var t,n,r,i,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Set,n=Gn(this.platforms),e.prev=2,i=d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.value,e.next=3,n.getFeatures();case 3:e.sent.forEach((function(e){t.add(e),a.setFeaturePlatform(e,n)}));case 5:case"end":return e.stop()}}),e)})),n.s();case 5:if((r=n.n()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:return e.abrupt("return",Array.from(t));case 18:case"end":return e.stop()}}),e,this,[[2,11,14,17]])}))),function(){return i.apply(this,arguments)})},{key:"sendIntent",value:(r=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.platformIndex){e.next=3;break}return e.next=3,this.getFeatures();case 3:this.logIntent(t),n=this.featurePlatforms(t.feature),r=Gn(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=17;break}return a=i.value,e.next=12,a.sendIntent(t);case 12:if("not-sent"===(o=e.sent).status){e.next=15;break}return e.abrupt("return",o);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return u="No platforms found that supports feature ".concat(t.feature," for intent ").concat(t.name),console.warn(u),e.abrupt("return",Promise.resolve({id:"".concat(t.feature,"-").concat(t.name),correlationId:"",intentName:t.name,status:"error",errorCode:"no.feature.platform",errorMessage:u}));case 28:case"end":return e.stop()}}),e,this,[[6,19,22,25]])}))),function(e){return r.apply(this,arguments)})},{key:"registerPlatforms",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Gn(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=8,this.registerPlatform(a);case 8:o=e.sent,n.push(o);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e){return n.apply(this,arguments)})},{key:"registerPlatform",value:(t=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new R.xQ,e.next=3,t.register((function(e){n.next(e)}));case 3:return r=e.sent,e.abrupt("return",{initialization:r,updates:n});case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"featurePlatforms",value:function(e){if(this.platformIndex)return this.platformIndex[e];throw Error("Platforms not initialized")}},{key:"setFeaturePlatform",value:function(e,t){this.platformIndex||(this.platformIndex={});var n=this.platformIndex[e];n?n.push(t):this.platformIndex[e]=[t]}},{key:"logIntent",value:function(e){}}]),e}();function Kn(e){return!0===e.collection}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?er(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e,t){var n,r=Yn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;Kn(i)?o(e,i):a(e,i)}}catch(e){r.e(e)}finally{r.f()}function a(e,t){var n=t.feature,r=t.name,i=t.state,a=(0,ut.Rl)(n,r);e.modify(a,(function(e){if(!function(e){return null!==e&&!Array.isArray(e)&&"object"==typeof e}(e))return i;Object.assign(e,i)}))}function o(e,t){var n=t.feature,r=t.name,i=t.keyName,a=t.state,o=t.add,u=t.remove,c=t.update,s=(0,ut.Rl)(n,r,[]);if(a)return e.set(s,a);e.modify(s,(function(e){o&&e.push.apply(e,(0,re.Z)(o)),u&&function(e,t,n){var r,i=Yn(n);try{var a=function(){var n=r.value,i=e.findIndex((function(e){return e[t]===n}));i>=0&&e.splice(i,1)};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}(e,i,u),c&&function(e,t,n){var r,i=Yn(n);try{var a=function(){var n=r.value,i=e.findIndex((function(e){return e[t]===n[t]}));i>=0&&function(e,t,n){e[t]=Qn(Qn({},e[t]),n)}(e,i,n)};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}(e,i,c)}))}}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){if(e.achievement){var n=e.achievement,r=n.XP,i=n.rarity,a=n.name;if(!a||!r||!i)return;t[a]=rr(rr({},e.achievement),{},{rarity:i.percent.toString()})}})),t}var ar='\n    query egsAchievements($sandboxId: String, $locale: String = "en-US") {\n        Achievement {\n            productAchievementsBySandbox (sandboxId: $sandboxId, locale: $locale) {\n                achievement {\n                    sandboxId\n                    name\n                    unlockedDisplayName\n                    lockedDisplayName\n                    unlockedDescription\n                    lockedDescription\n                    rarity {\n                        percent\n                    }\n                    XP\n                    unlockedIconLink\n                    lockedIconLink\n                    tier {\n                        name\n                        hexColor\n                    }\n                }\n            }\n        }\n    }\n';const or=new(function(){function e(){(0,o.Z)(this,e)}var t;return(0,f.Z)(e,[{key:"getProductAchievementsBySandbox",value:(t=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"en-US",e.prev=1,e.next=4,z.query(ar,{sandboxId:t,locale:n});case 4:if(i=e.sent,a=null===(r=i.data.Achievement)||void 0===r?void 0:r.productAchievementsBySandbox){e.next=8;break}return e.abrupt("return");case 8:return e.abrupt("return",ir(a));case 11:throw e.prev=11,e.t0=e.catch(1),console.error("getProductAchievementsBySandbox failed to retrieve data",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e){return t.apply(this,arguments)})}]),e}());var ur=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[lt.Gy])}var t;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){switch(e.name){case"fetch-egs-data":return this.fetchEgsData(e);default:return!1}}},{key:"fetchEgsData",value:(t=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,or.getProductAchievementsBySandbox(t.payload.sandboxId,t.payload.locale);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("EgsAchievementsPlatform error: ".concat(e.t0));case 9:if(!n){e.next=11;break}return e.abrupt("return",Promise.resolve(le().state(lt.KJ,n).build()));case 11:return e.abrupt("return",Promise.resolve([]));case 12:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return t.apply(this,arguments)})}]),e}();const cr=new(function(){function e(){(0,o.Z)(this,e)}var t;return(0,f.Z)(e,[{key:"getExternalAuths",value:(t=(0,p.Z)(d().mark((function e(t){var n,r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.query("\nquery account($accountId: String) {\n  Account {\n    account(id: $accountId) {\n      id\n      externalAuths {\n        type\n        externalDisplayName\n      }\n    }\n  }\n}\n",{accountId:t});case 3:return o=e.sent,u=null===(n=o.data)||void 0===n||null===(r=n.Account)||void 0===r||null===(i=r.account)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.externalAuths,e.abrupt("return",oe(u));case 8:throw e.prev=8,e.t0=e.catch(0),console.error("getExternalAuths failed to retrieve data",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return t.apply(this,arguments)})}]),e}());var sr=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Se.N])}var t;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"request-external-auths":return this.getExternalAuths(n.id);case"clear-external-auths":return Promise.resolve(this.clearExternalAuths());default:return!1}}},{key:"getExternalAuths",value:(t=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cr.getExternalAuths(t);case 3:return n=e.sent,e.abrupt("return",pe("friends-external-auths").set(ve.r9,n).build());case 7:if(e.prev=7,e.t0=e.catch(0),!(r=e.t0.serviceResponse)){e.next=12;break}throw Error(r.errorCode);case 12:throw Error("errors.com.epicgames.unknown");case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"clearExternalAuths",value:function(){return pe("friends-external-auths").set(ve.r9,[]).build()}}]),e}();function lr(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r,i,a,o=e[n],u=null===(r=o.account)||void 0===r?void 0:r[0];if(u){var c=u.friendshipStatus;switch(u.friendshipStatus){case"SENT_INVITE":c="outgoing";break;case"RECEIVED_INVITE":c="incoming";break;case"FRIEND":c="accepted"}t.push({id:u.id,displayName:u.displayName||(null===(i=u.externalAuths)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.externalDisplayName),friendshipStatus:u.friendshipStatus,type:c,externalAuths:oe(u.externalAuths),epicMutuals:parseInt(o.epicMutuals||"0",10)})}}return t}const dr=new(function(){function e(){(0,o.Z)(this,e)}var t;return(0,f.Z)(e,[{key:"getSearchResultsByTerm",value:(t=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.query("\n    query getSearchResultsByTerm($searchTerm: String, $platform: String) {\n        ExtendedSearchResult {\n            extendedSearch(searchTerm: $searchTerm, platform: $platform) {\n                epicMutuals\n                account {\n                    id\n                    displayName\n                    friendshipStatus\n                    externalAuths{\n                        externalDisplayName\n                        type\n                    }\n                }\n            }\n        }\n    }\n",{searchTerm:t,platform:"epic"});case 3:if(r=e.sent,i=null===(n=r.data.ExtendedSearchResult)||void 0===n?void 0:n.extendedSearch){e.next=7;break}throw new Error("Extended search returned null in getSearchResultsByTerm()");case 7:return e.abrupt("return",lr(i));case 10:throw e.prev=10,e.t0=e.catch(0),console.error("getSearchResultsByTerm failed to retrieve data",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){return t.apply(this,arguments)})}]),e}());var pr=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Y.RK])}var t,n,r,i,a;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"request-friend":case"accept-friend-request":return this.addFriend(n.id,t);case"dismiss-friend-request":return this.deleteFriend(n.id);case"query-friend-search":return this.queryFriendSearch(n.searchTerm);case"clear-search-results":return this.clearSearchResults();case"block-friend":return this.blockFriend(n.id);case"unblock-friend":return this.unblockFriend(n.id);default:return!1}}},{key:"addFriend",value:(a=(0,p.Z)(d().mark((function t(n,r){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.addFriend(n);case 3:if(t.sent){t.next=6;break}throw Error("friends-management.".concat(r,".unsuccessful"));case 6:t.next=16;break;case 8:if(t.prev=8,t.t0=t.catch(0),!(i=t.t0.serviceResponse)){t.next=13;break}throw Error(i.errorCode);case 13:if(t.t0.message!=="friends-management.".concat(r,".unsuccessful")){t.next=15;break}throw{errorCode:t.t0.message,errorMessage:"Friend request was unsuccessful"};case 15:throw Error("errors.com.epicgames.unknown");case 16:return t.abrupt("return",pe("friend-added").add(W.ct,e.getInitialFriendPresence(n)).build());case 17:case"end":return t.stop()}}),t,null,[[0,8]])}))),function(e,t){return a.apply(this,arguments)})},{key:"blockFriend",value:(i=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.blockFriend(t);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(n=e.t0.serviceResponse)){e.next=10;break}throw Error(n.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return i.apply(this,arguments)})},{key:"unblockFriend",value:(r=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.unblockFriend(t);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(n=e.t0.serviceResponse)){e.next=10;break}throw Error(n.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteFriend",value:(n=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.deleteFriend(t);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(n=e.t0.serviceResponse)){e.next=10;break}throw Error(n.errorCode);case 10:throw Error("errors.com.epicgames.unknown");case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return n.apply(this,arguments)})},{key:"queryFriendSearch",value:(t=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dr.getSearchResultsByTerm(t);case 3:return n=e.sent,e.abrupt("return",pe("new-friend-search-results").set(Y.ok,n).build());case 7:throw e.prev=7,e.t0=e.catch(0),Error("errors.com.epicgames.friends.search.down");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"clearSearchResults",value:function(){return Promise.resolve(pe("clear-search-results").set(Y.ok,[]).build())}}],[{key:"getInitialFriendPresence",value:function(e){return{id:e,status:"offline",appId:"",appName:"",joinable:!1,sameSession:!1,platform:"unknown",detailedStatus:""}}}]),e}();const fr=new(function(){function e(){(0,o.Z)(this,e)}var t;return(0,f.Z)(e,[{key:"getInitialLastOnline",value:(t=(0,p.Z)(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.query("\nquery getLastOnlineSummary($namespace: String, $circle: String) {   \n    Presence {\n        getLastOnlineSummary(namespace: $namespace, circle: $circle) {\n            summary {\n                friendId\n                namespace\n                circle\n                last_online\n            }\n        }   \n    }\n}\n",{namespace:"_",circle:"friends"});case 3:if(n=e.sent,r=null===(t=n.data.Presence)||void 0===t?void 0:t.getLastOnlineSummary){e.next=7;break}throw new Error("LastOnline returned null when fetching getInitialLastOnline");case 7:return e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),console.error("LastOnline failed to retrieve data",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return t.apply(this,arguments)})}]),e}());function vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e&&e.forEach((function(e){var n=e.friendId,r=e.last_online;n&&r&&(t[n]=new Date(r))})),t}var hr=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[W.qc]),(0,v.Z)(this,"initialize",(0,p.Z)(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,fr.getInitialLastOnline();case 3:return n=e.sent,r=null==n?void 0:n.summary,t=vr(r),e.abrupt("return",Promise.resolve(le().state(W.oo,t).build()));case 7:case"end":return e.stop()}}),e)}))))}return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"update-friend":return this.updateFriend(n.friendId);default:return!1}}},{key:"updateFriend",value:function(e){var t=new Date;return Promise.resolve(pe("update-friend-last-online").update(W.oo,(0,v.Z)({},e,t)).build())}}]),e}();function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mr=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Xe.c])}return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"add-notification":return this.addNotification(n);case"remove-notification":return this.removeNotification(n);case"clear-all-notifications":return this.clearAllNotifications();default:return!1}}},{key:"addNotification",value:function(e){return Promise.resolve(pe("add-notification").add(Xe.T,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(0,X.v4)()},e)).build())}},{key:"removeNotification",value:function(e){var t=e.id;return Promise.resolve(pe("remove-notification").remove(Xe.T,t).build())}},{key:"clearAllNotifications",value:function(){return Promise.resolve(pe("clear-all-notifications").set(Xe.T,[]).build())}}]),e}();function br(e,t){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat({}.EPIC_TOKEN_EXCHANGE_URL,"/exchange"),i=JSON.stringify({exchangeCode:t,codeVerifier:n}),e.next=4,fetch(r,{method:"post",mode:"cors",referrerPolicy:"no-referrer-when-downgrade",headers:{"Content-Type":"application/json"},body:i});case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat({}.EPIC_TOKEN_EXCHANGE_URL,"/refresh"),r=JSON.stringify({refreshToken:t}),e.next=4,fetch(n,{method:"post",mode:"cors",referrerPolicy:"no-referrer-when-downgrade",headers:{"Content-Type":"application/json"},body:r});case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xr=n(80900),Or=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[Se.k]),(0,v.Z)(this,"sendUpdates",void 0),this.sendUpdates=function(){}}var t,n;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){switch(e.name){case"exchange-token":return this.exchangeToken(e);default:return!1}}},{key:"initialize",value:function(e){return this.sendUpdates=e,Promise.resolve([])}},{key:"exchangeToken",value:(n=(0,p.Z)(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=n.exchangeCode,i=n.codeVerifier,e.next=3,br(r,i);case 3:return a=e.sent,e.abrupt("return",this.handleResponse(a,"token-exchanged"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleResponse",value:function(e,t){return this.isError(e)?this.handleError(e):this.handleSuccess(e,t)}},{key:"handleSuccess",value:function(e,t){this.triggerRefreshTimer(e);var n={id:e.account_id,displayName:e.displayName,elevatedToken:e.access_token};return pe(t).update(ve.Qb,n).build()}},{key:"triggerRefreshTimer",value:function(e){var t=this;if(e.expires_in>0){var n=1e3*e.expires_in;(0,xr.H)(n).subscribe((function(){t.refreshToken(e.refresh_token)}))}}},{key:"refreshToken",value:(t=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kr(t);case 2:n=e.sent,r=this.handleResponse(n,"token-refreshed"),this.sendUpdates(r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleError",value:function(e){return console.error("Error exchanging token",e),[]}},{key:"isError",value:function(e){return!!e.error}}]),e}(),Ir=function(){function e(){(0,o.Z)(this,e),(0,v.Z)(this,"features",[We.x])}var t;return(0,f.Z)(e,[{key:"handleIntent",value:function(e){var t=e.name,n=e.payload;switch(t){case"update-settings":return this.updateSettings(n);default:return!1}}},{key:"updateSettings",value:(t=(0,p.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.autodecline){e.next=12;break}return e.prev=1,e.next=4,ce.setPrivacySettings(t.autodecline?ie.X.None:ie.X.All);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(n=e.t0.serviceResponse)){e.next=11;break}throw Error(n.errorCode);case 11:throw Error("errors.com.epicgames.unknown");case 12:return e.abrupt("return",Promise.resolve(pe("update-settings").update(We.Z,t).build()));case 13:case"end":return e.stop()}}),e,null,[[1,6]])}))),function(e){return t.apply(this,arguments)})}]),e}();function Sr(e){var t=e.get(ut.bX),n=[new mr,new Or,new ur];"egs-launcher"!==(null==t?void 0:t.platformName)&&n.push(new Ir);var r=new Ie(n,{platformVersion:"0.0.0",platformName:"internal",productName:"internal-platform",productVersion:"0.0",productId:"unknown",osName:"Unknown",osVersion:"0"});function i(e){return r.addFeature(e),function(){a.apply(this,arguments)}(),function(){return r.removeFeature(e)}}function a(){return(a=(0,p.Z)(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.get(ut.p0))){t.next=6;break}return t.next=4,n.getFeatures();case 4:r=t.sent,e.set(ut.AN,r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return bt(e,{flag:"friends-last-online-enabled",enable:function(){return i(new hr)}}),bt(e,{flag:"friends-management-enabled",enable:function(){return i(new pr)}}),bt(e,{flag:"friends-profile-enabled",enable:function(){return i(new sr)}}),bt(e,{flag:"epic-connect-enabled",enable:function(){return i(new ge("wss://connect.epicgames.dev"))}}),r}var Tr=n(55430),Zr=n(7104),Pr=n(65275);function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nr(e){return function(){var t=(0,p.Z)(d().mark((function t(n){var r,i,a,o,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Zr.LDClient(e),i=n.get(Tr.v),t.next=4,n.waitFor(ve.Qb,(function(e){return!!e.id}));case 4:return a=t.sent,t.next=7,n.waitFor(ut.bX);case 7:return o=t.sent,t.next=10,r.getFeatureFlags({accountId:a.id,flags:Pr.u,custom:Er({},o)});case 10:u=t.sent,n.set(Tr.v,Er(Er({},i),u));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function jr(e){return e==ie.X.Private||e==ie.X.None||e==ie.X.FriendsOfFriends}function Fr(e){return function(t){t.changes(Tr.v).pipe((0,Te.zg)(function(){var t=(0,p.Z)(d().mark((function t(n){var r,i,a,o,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n["show-auto-decline-friends-enabled"],i=ie.X.All,!r){t.next=12;break}return t.prev=3,t.next=6,ce.getPrivacySettings();case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("InitializeSettingsEffect error: ".concat(t.t0));case 12:return t.next=14,e.getInfo();case 14:if(t.t1=t.sent.platformName,"egs-launcher"!=t.t1){t.next=35;break}if(a=ze(),o=a.isautodeclinefriendrequestsenabled,u=a.isshownotificationsenabled,t.t2=!!u,!t.t2){t.next=22;break}return t.next=21,u();case 21:t.t2=!t.sent;case 22:if(t.t3=t.t2,t.t4=jr(i),t.t4){t.next=31;break}if(t.t5=!!o,!t.t5){t.next=30;break}return t.next=29,o();case 29:t.t5=t.sent;case 30:t.t4=t.t5;case 31:return t.t6=t.t4,t.abrupt("return",{donotdisturb:t.t3,autodecline:t.t6});case 35:return t.abrupt("return",{autodecline:jr(i),donotdisturb:!1});case 36:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}())).subscribe((function(e){t.set(We.Z,e)}))}}var Cr=function(){var e=(0,p.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitFor(ut.p0);case 2:return n=e.sent,e.next=5,n.getInfo();case 5:r=e.sent,t.set(ut.bX,r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rr=n(26601),Ur=function(e){e.changes(ve.Qb).pipe((0,b.h)((function(e){return e.authToken.length>0}))).subscribe((function(t){var n=t.authToken,r=(0,Rr.Z)(n);e.set(ut.J,r)}))};function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=function(e,t){return"offline"!==e.status&&"offline"===t.status},qr=gt(W.qc,(function(e){var t=vt(e,W.ct,_r).subscribe((function(t){var n=e.get(W.oo);e.set(W.oo,Mr(Mr({},n),{},(0,v.Z)({},t.id,new Date)))}));return function(){return t.unsubscribe()}})),zr=[Pn(W.ct,W.gV,(function(e){return e.id})),qr,function(e){function t(){return(t=(0,p.Z)(d().mark((function t(n){var r,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitFor(ut.p0);case 2:r=t.sent,i={name:"connect-presence",feature:W.ut,payload:{account:n}},r.sendIntent(i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}he(e).subscribe((function(e){!function(e){t.apply(this,arguments)}(e)}))}];function $r(e,t,n){return[(i=n,function(){return z.initialize(i)}),Nr(t),(r=e,function(){var e=(0,p.Z)(d().mark((function e(t){var n,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=(0,p.Z)(d().mark((function e(n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.register((function(e){t.modify((function(t){return tr(t,e)}))}));case 2:return r=e.sent,e.next=5,n.getFeatures();case 5:i=e.sent,t.modify((function(e){tr(e,r),e.set(ut.AN,i)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=Sr(t),i=new Jn(r,[n]),e.next=7,a(i);case 7:t.set(ut.p0,i);case 8:t.changes(ut.p0).subscribe((function(e){a(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fr(e),Cr,Ur].concat((0,re.Z)(vn),(0,re.Z)(Mn),(0,re.Z)(Vn),(0,re.Z)(zr),(0,re.Z)(st),(0,re.Z)(On),(0,re.Z)(Ot));var r,i}var Lr=n(810);const Xr=function(e){return(0,e.children)((0,Lr.b)())};var Br=["ar","de","en-US","es-ES","es-MX","fr","it","ja","ko","pl","pt-BR","ru","th","tr","zh-Hans","zh-Hant"],Vr={"es-419":"es-MX",es:"es-ES",en:"en-US",zh:"zh-Hans","zh-CN":"zh-Hans","zh-HK":"zh-Hant","zh-TW":"zh-Hant"},Gr=n(33088),Hr=function(){},Jr=a().createContext(Hr);Jr.displayName="SetThemeTypeContext";const Kr=Jr;var Wr=n(55138),Qr=n(42319),Yr=n(64738),ei=n(33586),ti=n(74662),ni=n(64309);const ri=jn.Z&&void 0!==window.kitt;var ii=n(22341),ai=1e4;function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ci=function(e){return ui(ui({},e.h1),{},{fontSize:e.pxToRem(20),fontWeight:700,lineHeight:1.1,letterSpacing:-.1,textTransform:"uppercase"})},si=function(e){return ui(ui({},e.h2),{},{fontSize:e.pxToRem(16),fontWeight:700,lineHeight:1.15,letterSpacing:-.1})},li=function(e){return ui(ui({},e.h3),{},{fontSize:e.pxToRem(12),fontWeight:500,letterSpacing:-.1,lineHeight:1.2,textTransform:"uppercase"})},di=function(e){return ui(ui({},e.h4),{},{fontSize:e.pxToRem(12),fontWeight:700,lineHeight:1.44,letterSpacing:-.1,textTransform:"uppercase"})},pi=function(e){return ui(ui({},e.body1),{},{fontSize:e.pxToRem(16),fontWeight:700,lineHeight:1.43,letterSpacing:.2})},fi=function(e){return ui(ui({},e.body2),{},{fontSize:e.pxToRem(14),lineHeight:1.43,letterSpacing:.2})},vi=function(e){return ui(ui({},e.caption),{},{fontSize:e.pxToRem(12),lineHeight:1.5,letterSpacing:"normal"})},hi=function(e){return ui(ui({},e.button),{},{fontSize:e.pxToRem(12),lineHeight:1.875,letterSpacing:.5})},yi=n(40990),mi=a().createElement;function bi(e){var t=e.children,n=e.type,r=(0,yi.V)()["mui-theme-improvements-enabled"],i=a().useState(n),o=(0,rt.Z)(i,2),u=o[0],c=o[1],s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isThemeImprovementsEnabled:!1},n=e.typography,r=ci(n),i=si(n),a=li(n),o=di(n),u=pi(n),c=fi(n),s=vi(n),l=hi(n);return t.isThemeImprovementsEnabled&&(u.fontSize=n.pxToRem(14),c.fontSize=n.pxToRem(12),c.fontWeight=200),ui(ui({},e),{},{typography:ui(ui({},e.typography),{},{h1:r,h2:i,h3:a,h4:o,body1:u,body2:c,caption:s,button:l})})}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isThemeImprovementsEnabled:!1},n=(0,Qr.createEpicPalette)({type:e,secondary:{main:"dark"===e?t.isThemeImprovementsEnabled?"#626262":"#858585":"#737373"},background:{default:"dark"===e?"#0b0b0b":ni.Z[200],paper:"dark"===e?t.isThemeImprovementsEnabled?"#141414":"#232323":ni.Z[50]}});"dark"===e&&(n.action.hover="rgba(255, 255, 255, 0.04)",n.action.focus="rgba(255, 255, 255, 0.04)");var r=(0,ei.default)(n,{fontFamily:"Brutal, sans-serif"}),i=(0,Yr.default)(5);return(0,Qr.createEpicTheme)({palette:n,overrides:{MuiAvatar:{root:t.isThemeImprovementsEnabled?{height:30,width:30,fontSize:r.pxToRem(14)}:void 0,colorDefault:{color:n.common.white}},MuiListItemAvatar:{root:{minWidth:30}},MuiListSubheader:{root:{fontSize:r.pxToRem(t.isThemeImprovementsEnabled?10:12),lineHeight:r.pxToRem(t.isThemeImprovementsEnabled?40:48),textTransform:"uppercase",letterSpacing:t.isThemeImprovementsEnabled?r.pxToRem(1):"unset"}},MuiListItem:{root:{paddingTop:i(2),paddingBottom:i(2)},gutters:{paddingLeft:t.isThemeImprovementsEnabled?0:i(2),paddingRight:t.isThemeImprovementsEnabled?i(1):i(2)}},MuiPopover:ri?{paper:{transform:"none !important"}}:{},MuiTabs:{indicator:{backgroundColor:n.primary.main}},MuiTab:{root:{borderBottom:"none"},textColorPrimary:{backgroundColor:"transparent","&:focus":{backgroundColor:(0,ti.U1)("dark"===e?n.common.white:n.common.black,.2)}}},MuiButton:{root:{padding:i(1.6,2),lineHeight:r.pxToRem(15)},sizeSmall:{padding:i(1.6,2),"& $label":{fontSize:r.pxToRem(13),fontWeight:500}}},MuiToolbar:{root:{backgroundColor:n.background.paper},dense:{minHeight:i(9)}},MuiPaper:{outlined:{borderColor:n.secondary.main,borderWidth:2}},MuiSelect:{filled:{textTransform:"uppercase",paddingTop:i(2),paddingLeft:i(4),"&.MuiFilledInput-input":{minHeight:0,paddingRight:i(7)}}},MuiFilledInput:{root:{borderRadius:"4px",backgroundColor:n.secondary.main,"&$focused":{backgroundColor:"rgb(123, 123, 123)"},"&:hover":{backgroundColor:"rgb(123, 123, 123)"}}}},zIndex:{mobileStepper:ai+ii.default.mobileStepper,speedDial:ai+ii.default.speedDial,appBar:ai+ii.default.appBar,drawer:ai+ii.default.drawer,modal:ai+ii.default.modal,snackbar:ai+ii.default.snackbar,tooltip:ai+ii.default.tooltip}})}(u,{isThemeImprovementsEnabled:r}),{isThemeImprovementsEnabled:r});return mi(Kr.Provider,{value:c},mi(Gr.ThemeProvider,{theme:s},mi(Wr.ThemeProvider,{theme:s},mi(Gr.StylesProvider,{injectFirst:!0},t))))}const gi=a().memo(bi);var ki=n(65664),wi=n(38381),xi=a().createElement;const Oi=function(e){var t=e.children,n=e.platform,r=e.launchdarklyEndpoint,i=e.graphqlEndpoint;return xi(wi.SharedValuesProvider,{initialValues:{AppPlatformInfo:n.getInfo()},effects:$r(n,r,i)},xi(gi,{type:"dark"},xi(Xr,null,(function(e){return xi(ki.bd,{locale:e,defaultLocale:"en-US",supportedLocales:Br,overrides:Vr},t)}))))};var Ii=a().createElement;const Si=function(e){var t=e.children,n=e.platform,r=e.graphqlEndpoint;return Ii(Oi,{platform:n,launchdarklyEndpoint:"https://social-overlay-launchdarkly-api-prod.ol.epicgames.com",graphqlEndpoint:r},t)};var Ti=n(83433);function Zi(e,t){return e.some((function(e){return e.key===t.code&&(!e.requireShift||t.shiftKey)}))}var Pi=function(e){var t=e.triggerOpen,n=e.triggerClose,r=(0,Ti.v)(),i=(0,rt.Z)(r,2),o=i[0],u=i[1],c=a().useCallback((function(e){o?Zi(n,e)&&u(!1):Zi(t,e)&&u(!0)}),[o,u,t,n]);return a().useEffect((function(){return document.addEventListener("keydown",c),function(){return document.removeEventListener("keydown",c)}}),[c]),null},Ai=a().createElement,Ei=[{key:"F3",requireShift:!0}],Ni=[].concat(Ei);const ji=function(e){var t=e.children,n=e.version,r=e.epicConnectUrl,o=e.graphqlUrl,u=e.locale,c=e.forceOpen,s=(0,i.useMemo)((function(){return new nt(n,r,u)}),[n,r,u]);return Ai(Si,{platform:s,graphqlEndpoint:o},Ai(ot,{forceOpen:c},Ai(a().Fragment,null,Ai(Pi,{triggerOpen:Ei,triggerClose:Ni}),t)))}}}]);